<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gameist | Play Free Online Games - Elementist, 2048, Wordle & More</title>
    <meta
      name="description"
      content="Play the best free online games at Gameist! Challenge yourself with Elementist (action roguelite), 2048 (puzzle), Wordle (word game), and more. No downloads required!"
    />
    <meta name="keywords" content="free online games, browser games, Elementist, 2048, Wordle, puzzle games, action games, word games, no download games, HTML5 games" />
    <meta name="robots" content="index,follow" />
    <link rel="canonical" href="https://gameist.fun/" />
    <meta property="og:site_name" content="Gameist" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Gameist | Play Free Online Games" />
    <meta property="og:description" content="Discover amazing free online games! Play Elementist, 2048, Wordle and more. No downloads, instant play!" />
    <meta property="og:url" content="https://gameist.fun/" />
    <meta property="og:image" content="https://gameist.fun/assets/og-image.jpg" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Gameist | Play Free Online Games" />
    <meta name="twitter:description" content="Play the best free online games! Elementist, 2048, Wordle and more. Instant play, no downloads!" />
    <meta name="twitter:image" content="https://gameist.fun/assets/og-image.jpg" />
    <meta name="twitter:site" content="@GameistHQ" />
    <meta name="geo.region" content="US" />
    <meta name="geo.placename" content="United States" />
    <meta name="ICBM" content="40.7128;-74.0060" />
    <link rel="alternate" hreflang="en" href="https://gameist.fun/" />
    <link rel="alternate" hreflang="en-US" href="https://gameist.fun/" />
    <link rel="alternate" hreflang="en-GB" href="https://gameist.fun/" />
    <link rel="alternate" hreflang="x-default" href="https://gameist.fun/" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-57L2NFVJYL"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'G-57L2NFVJYL', {
        'custom_map': {'custom_parameter_1': 'game_type'},
        'content_group1': 'Gaming Hub',
        'geo': 'US'
      });
    </script>
    
    <!-- Preconnect to external domains for faster loading -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://www.googletagmanager.com" />
    <link rel="preconnect" href="https://www.google-analytics.com" />
    <link rel="preconnect" href="https://firebase.googleapis.com" />
    
    <!-- DNS prefetch for external resources -->
    <link rel="dns-prefetch" href="//fonts.googleapis.com" />
    <link rel="dns-prefetch" href="//www.googletagmanager.com" />
    <link rel="dns-prefetch" href="//www.google-analytics.com" />
    <link rel="dns-prefetch" href="//firebase.googleapis.com" />
    <script>
      (function() {
        var script = document.createElement('script');
        script.async = true;
        script.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9478711342689131';
        script.crossOrigin = 'anonymous';
        document.head.appendChild(script);
      })();
    </script>
    <meta
      property="og:description"
      content="Elementist: Elementlerin g√ºc√ºn√º ke≈üfet, d√º≈ümanlarƒ± alt et ve hayatta kal!"
    />
    <meta property="og:url" content="./index.html" />
    <meta property="og:image" content="./Elementist/elementistlogo.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Elementist - Roguelite Oyunu | Gameist" />
    <meta
      name="twitter:description"
      content="Elementist: Elementlerin g√ºc√ºn√º ke≈üfet, d√º≈ümanlarƒ± alt et ve hayatta kal!"
    />
    <meta name="twitter:image" content="./Elementist/elementistlogo.png" />
    <link rel="icon" href="ico.png" type="image/png" />
    <link rel="icon" href="ico.png" sizes="32x32" type="image/png" />
    <link rel="icon" href="ico.png" sizes="16x16" type="image/png" />
    <link rel="apple-touch-icon" href="ico.png" />
    <link rel="shortcut icon" href="ico.png" type="image/png" />
    
    <!-- Disable CSP for Adsterra -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval'; script-src * 'unsafe-inline' 'unsafe-eval'; connect-src *; img-src * data: blob: 'unsafe-inline'; frame-src *; style-src * 'unsafe-inline';">
    
    <!-- Adsterra Scripts via Proxy -->
    <script>
      // Load Adsterra scripts dynamically to bypass CSP
      function loadAdsterraScript(src) {
        var script = document.createElement('script');
        script.src = src;
        script.async = true;
        document.head.appendChild(script);
      }
      
      // Load 320x50 ad script
      setTimeout(function() {
        loadAdsterraScript('https://www.highperformanceformat.com/ce673f1e09efadddcb7e75ee9d586e4a/invoke.js');
      }, 1000);
    </script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Gameist",
        "url": "https://gameist.fun/",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://gameist.fun/?q={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    </script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "ItemList",
        "name": "Gameist Games",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Elementist",
            "url": "https://gameist.fun/Elementist/glowlings.html"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "2048",
            "url": "https://gameist.fun/2048/index.html"
          },
          {
            "@type": "ListItem",
            "position": 3,
            "name": "Wordlist",
            "url": "https://gameist.fun/wordle/index.html"
          },
          {
            "@type": "ListItem",
            "position": 4,
            "name": "Bilardist",
            "url": "https://gameist.fun/bilardo/index.html"
          }
        ]
      }
    </script>
    <link rel="stylesheet" href="giris_stili.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript>
      <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap"
        rel="stylesheet"
      />
    </noscript>
    <link
      rel="preload"
      as="style"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript>
      <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      />
    </noscript>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Gameist",
        "url": "./index.html",
        "inLanguage": "en",
        "description": "Gameist main hub that brings all free online games together in one place. Play Elementist, 2048, Wordle and more!",
        "audience": {
          "@type": "Audience",
          "audienceType": "Global gamers"
        },
        "genre": ["Games", "Entertainment", "Puzzle", "Action"],
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD",
          "availability": "https://schema.org/InStock"
        },
        "hasPart": [
          {
            "@type": "WebPage",
            "name": "Elementist",
            "url": "./Elementist/glowlings.html"
          },
          {
            "@type": "WebPage",
            "name": "2048",
            "url": "./2048/index.html"
          },
          {
            "@type": "WebPage",
            "name": "Wordlist",
            "url": "./wordle/index.html"
          },
          {
            "@type": "WebPage",
            "name": "Bilardist",
            "url": "./bilardo/index.html"
          }
        ]
      }
    </script>
  </head>
  <body>
    <!-- Animated Background -->
    <div class="animated-bg">
      <div class="floating-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
        <div class="shape shape-4"></div>
        <div class="shape shape-5"></div>
      </div>
    </div>

    <!-- Rick & Morty Easter Egg -->
    <!-- <div class="rick-morty-container">
      <div class="rick-wrapper">
        <img src="rick.gif" alt="Rick" class="rick-gif" id="rickGif" />
        <div class="speech-bubble" id="speechBubble">
          <span>Doƒüru yerdesin Morty!</span>
        </div>
        <audio id="rickAudio" src="ricklaugh.mp3"></audio>
      </div>
    </div> -->

    <!-- Main Container -->
    <div class="main-container">
      <!-- Header Section -->
      <header class="hero-section">
        <div class="hero-content">
          <div class="lang-switch" aria-label="Language selector">
            <label class="lang-switch-label" for="gameistLangSelect" data-i18n="lang_label">Language</label>
            <select id="gameistLangSelect" class="lang-switch-select">
              <option value="en" selected>EN</option>
              <option value="tr">TR</option>
            </select>
          </div>
          <div class="logo-container">
            <div class="logo-icon">
              <i class="fas fa-gamepad"></i>
            </div>
            <h1 class="brand-title">
              <span class="brand-main">Gameist</span>
              <span class="brand-sub" data-i18n="brand_sub">Premium Gaming Hub</span>
            </h1>
          </div>

          <!-- Firebase Authentication -->
          <div class="auth-section" style="margin-top: 20px; text-align: center;">
            <button id="googleLogin" class="google-login-btn" style="padding: 10px 20px; background: #4285f4; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 500; display: inline-flex; align-items: center; gap: 8px; transition: all 0.3s ease;">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
              </svg>
              Sign in with Google
            </button>
            
            <!-- Update Notification Banner -->
            <div id="updateNotification" style="
              margin-top: 16px;
              padding: 12px 16px;
              background: linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(147, 51, 234, 0.15) 100%);
              border: 1px solid rgba(59, 130, 246, 0.3);
              border-radius: 12px;
              backdrop-filter: blur(10px);
              display: flex;
              align-items: center;
              gap: 8px;
              animation: slideInBounce 0.6s ease-out;
              cursor: pointer;
              transition: all 0.3s ease;
            " onclick="this.style.transform='scale(0.95)'; setTimeout(() => this.style.transform='scale(1)', 150)"
               onmouseover="this.style.background='linear-gradient(135deg, rgba(59, 130, 246, 0.25) 0%, rgba(147, 51, 234, 0.25) 100%)'; this.style.borderColor='rgba(59, 130, 246, 0.5)'; this.style.transform='translateY(-2px)'"
               onmouseout="this.style.background='linear-gradient(135deg, rgba(59, 130, 246, 0.15) 0%, rgba(147, 51, 234, 0.15) 100%)'; this.style.borderColor='rgba(59, 130, 246, 0.3)'; this.style.transform='translateY(0)'">
              <span style="font-size: 16px; animation: pulse 2s infinite;">üëÄ</span>
              <div style="flex: 1;">
                <div style="color: rgba(255,255,255,0.95); font-size: 12px; font-weight: 600; line-height: 1.3;">
                  üéâ Elementist Major Update Today!
                </div>
                <div style="color: rgba(255,255,255,0.7); font-size: 10px; margin-top: 2px;">
                  üé® Modern Game Over Screen ‚Ä¢ üìä Enhanced Stats ‚Ä¢ üîß Bug Fixes ‚Ä¢ üåç Multi-language
                </div>
                <div style="color: rgba(255,255,255,0.5); font-size: 8px; margin-top: 3px;">
                  Update date: 28.01.2026
                </div>
              </div>
              <div style="
                width: 6px;
                height: 6px;
                background: linear-gradient(135deg, #3b82f6 0%, #9333ea 100%);
                border-radius: 50%;
                animation: blink 3s infinite;
              "></div>
            </div>
            
            <!-- Strategic Ad Placement - Below Update Notification -->
            <div style="display: flex; justify-content: center; margin: 20px 0;">
              <div style="width: 320px; height: 50px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; backdrop-filter: blur(10px); display: flex; align-items: center; justify-content: center;">
                <!-- Adsterra 320x50 - Strategic Placement -->
                <script>
                  atOptions = {
                    'key' : 'ce673f1e09efadddcb7e75ee9d586e4a',
                    'format' : 'iframe',
                    'height' : 50,
                    'width' : 320,
                    'params' : {}
                  };
                </script>
                <script src="https://www.highperformanceformat.com/ce673f1e09efadddcb7e75ee9d586e4a/invoke.js"></script>
              </div>
            </div>
            
            <div id="userInfo" style="display: none; margin-top: 20px;">
              <div style="padding: 20px; background: linear-gradient(145deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0.05) 100%); border-radius: 16px; backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.3); box-shadow: 0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.2); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden;">
                <!-- Animated background gradient -->
                <div style="position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent); animation: shimmer 3s infinite;"></div>
                
                <!-- User Profile Section -->
                <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px; position: relative; z-index: 1;">
                  <div style="position: relative;">
                    <img id="userPhoto" src="" alt="User" style="width: 48px; height: 48px; border-radius: 50%; object-fit: cover; border: 3px solid rgba(255,255,255,0.4); box-shadow: 0 8px 24px rgba(0,0,0,0.2), 0 0 0 1px rgba(255,255,255,0.1);">
                    <div style="position: absolute; bottom: 0px; right: 0px; width: 16px; height: 16px; background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%); border: 3px solid rgba(255,255,255,0.9); border-radius: 50%; box-shadow: 0 2px 8px rgba(34,197,94,0.4);"></div>
                    <div style="position: absolute; top: -2px; right: -2px; background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); color: white; border-radius: 50%; width: 16px; height: 16px; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold; border: 2px solid rgba(255,255,255,0.9);">‚ú®</div>
                  </div>
                  <div style="text-align: left; flex: 1;">
                    <div style="color: rgba(255,255,255,0.9); font-weight: 600; font-size: 11px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 2px;" data-i18n="welcome_text">Welcome</div>
                    <div id="userName" style="color: white; font-weight: 700; font-size: 20px; text-shadow: 0 2px 8px rgba(0,0,0,0.3); margin-bottom: 2px; line-height: 1.2;"></div>
                    <div id="userEmail" style="color: rgba(255,255,255,0.8); font-size: 13px; font-weight: 500; display: flex; align-items: center; gap: 4px;">
                      <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor" style="opacity: 0.7;">
                        <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                      </svg>
                      <span id="userEmailText" style="max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"></span>
                    </div>
                  </div>
                </div>
                
                <!-- Stats Section - Carousel -->
                <div style="position: relative; margin-bottom: 16px; position: relative; z-index: 1;">
                  <div id="scoreCarousel" style="background: rgba(255,255,255,0.1); padding: 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2); overflow: hidden; cursor: grab; user-select: none;">
                    <div id="carouselContainer" style="display: flex; transition: transform 0.3s ease;">
                      <!-- Slide 1: Total Score -->
                      <div class="carousel-slide" style="min-width: 100%; text-align: center;">
                        <div style="color: #fbbf24; font-size: 18px; font-weight: 700; margin-bottom: 2px;">üèÜ</div>
                        <div style="color: rgba(255,255,255,0.8); font-size: 11px; font-weight: 600;">Total Score</div>
                        <div id="totalScoreDisplay" style="color: white; font-size: 16px; font-weight: 700;">0</div>
                      </div>
                      <!-- Slide 2: Elementist Best -->
                      <div class="carousel-slide" style="min-width: 100%; text-align: center;">
                        <div style="color: #fbbf24; font-size: 18px; font-weight: 700; margin-bottom: 2px;">üéÆ</div>
                        <div style="color: rgba(255,255,255,0.8); font-size: 11px; font-weight: 600;">Elementist Best</div>
                        <div id="elementistBestDisplay" style="color: white; font-size: 16px; font-weight: 700;">0</div>
                      </div>
                      <!-- Slide 3: 2048 Best -->
                      <div class="carousel-slide" style="min-width: 100%; text-align: center;">
                        <div style="color: #fbbf24; font-size: 18px; font-weight: 700; margin-bottom: 2px;">üî¢</div>
                        <div style="color: rgba(255,255,255,0.8); font-size: 11px; font-weight: 600;">2048 Best</div>
                        <div id="2048BestDisplay" style="color: white; font-size: 16px; font-weight: 700;">0</div>
                      </div>
                    </div>
                  </div>
                  <!-- Carousel indicators -->
                  <div id="carouselIndicators" style="display: flex; justify-content: center; gap: 4px; margin-top: 6px;">
                    <span class="indicator" data-slide="0" style="width: 6px; height: 6px; border-radius: 50%; background: rgba(255,255,255,0.6); cursor: pointer; transition: all 0.2s ease;"></span>
                    <span class="indicator" data-slide="1" style="width: 6px; height: 6px; border-radius: 50%; background: rgba(255,255,255,0.3); cursor: pointer; transition: all 0.2s ease;"></span>
                    <span class="indicator" data-slide="2" style="width: 6px; height: 6px; border-radius: 50%; background: rgba(255,255,255,0.3); cursor: pointer; transition: all 0.2s ease;"></span>
                  </div>
                </div>
                
                <!-- Action Buttons -->
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 6px; position: relative; z-index: 1;">
                  <button id="profileBtn" style="padding: 8px; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 11px; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(59,130,246,0.3); display: flex; align-items: center; justify-content: center; gap: 3px;">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                    </svg>
                    <span data-i18n="profile_button">Profile</span>
                  </button>
                  <button id="leaderboardBtn" style="padding: 8px; background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 11px; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(139,92,246,0.3); display: flex; align-items: center; justify-content: center; gap: 3px;">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M7.5 21L2 16l2.5-2.5L7.5 16l6-6L16 12l-8.5 9zM22.5 6L12 16.5l-3-3L18 4.5l4.5 1.5z"/>
                    </svg>
                    <span data-i18n="leaderboard_button">Leaderboard</span>
                  </button>
                  <button id="refreshStatsBtn" style="padding: 8px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 11px; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(16,185,129,0.3); display: flex; align-items: center; justify-content: center; gap: 3px;">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                    </svg>
                    <span>Refresh</span>
                  </button>
                  <button id="logout" style="padding: 8px; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 11px; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(239,68,68,0.3); display: flex; align-items: center; justify-content: center; gap: 3px;">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                    </svg>
                    <span data-i18n="logout_button">Logout</span>
                  </button>
                </div>
              </div>
            </div>
            
            <!-- Add shimmer animation -->
            <style>
            @keyframes shimmer {
              0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
              100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
            }
            
            @keyframes slideInBounce {
              0% { 
                opacity: 0; 
                transform: translateY(-20px) scale(0.9); 
              }
              60% { 
                opacity: 1; 
                transform: translateY(2px) scale(1.02); 
              }
              100% { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
              }
            }
            
            @keyframes pulse {
              0%, 100% { transform: scale(1); }
              50% { transform: scale(1.1); }
            }
            
            @keyframes blink {
              0%, 100% { opacity: 1; }
              50% { opacity: 0.3; }
            }
            
            /* Responsive styles for update notification */
            @media (max-width: 480px) {
              #updateNotification {
                padding: 10px 12px !important;
                font-size: 11px !important;
              }
              
              #updateNotification div div {
                font-size: 11px !important;
              }
              
              #updateNotification div div:last-child {
                font-size: 9px !important;
              }
              
              /* Touch-friendly for mobile */
              #updateNotification:active {
                transform: scale(0.98) !important;
                background: linear-gradient(135deg, rgba(59, 130, 246, 0.3) 0%, rgba(147, 51, 234, 0.3) 100%) !important;
              }
            }
            
            /* Desktop hover effects */
            @media (min-width: 481px) {
              #updateNotification:hover {
                background: linear-gradient(135deg, rgba(59, 130, 246, 0.25) 0%, rgba(147, 51, 234, 0.25) 100%) !important;
                border-color: rgba(59, 130, 246, 0.5) !important;
                transform: translateY(-2px) !important;
                box-shadow: 0 8px 25px rgba(59, 130, 246, 0.2) !important;
              }
            }
            </style>
            <div id="authStatus" style="margin-top: 8px; font-size: 12px; color: rgba(255,255,255,0.7); display: none;"></div>
          </div>
        </div>
      </header>

      <!-- Games Section -->
      <section class="games-section">
        <div class="section-header">
          <h3 class="section-title">
            <i class="fas fa-fire"></i>
            <span data-i18n="section_popular_games">Popular Games</span>
          </h3>
          <p class="section-subtitle" data-i18n="section_popular_subtitle">
            Start playing now and discover the fun!
          </p>
        </div>

        <div class="games-grid">
           <a href="Elementist/glowlings.html" onclick="trackGameClick('elementist', 'main_grid')" class="game-card featured">
            <div class="card-header">
            
              <div class="game-badge">
                <i class="fas fa-crown"></i>
                <span data-i18n="badge_popular">Popular</span>
              </div>
              <div class="card-actions">
                <button class="action-btn favorite">
                  <i class="far fa-heart"></i>
                </button>
                <button class="action-btn share">
                  <i class="fas fa-share"></i>
                </button>
              </div>
            </div>

            <div class="card-image">
              <img src="Elementist/elementistlogo.png" alt="Elementist - Roguelite" loading="lazy" decoding="async" />
              <div class="play-overlay">
                <div class="play-button">
                  <i class="fas fa-play"></i>
                </div>
              </div>
            </div>
   <!-- Batak Game Card -->
            <div class="card-content">
              <div class="game-title">
                <h4 data-i18n="game_elementist_title">Elementist</h4>
                <span class="game-icon">üÉè</span>
              </div>
              <p class="game-description" data-i18n="game_elementist_desc">
              Master the elements in this intense roguelite action game! Battle waves of enemies, collect power-ups, and survive in the neon arena. Perfect for players who love challenging gameplay.
              </p>
              <div class="game-features">
                <span class="feature-tag">
                  <i class="fas fa-lightbulb"></i>
                <span data-i18n="tag_roguelite">Roguelite</span>
                </span>
                <span class="feature-tag">
                  <i class="fas fa-language"></i>
                  TR / EN / DE / ES / PT-BR / JA / HI / ZH
                </span>
              </div>
              <div class="card-footer">
               <div class="rating">
                  <div class="stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                  </div>
                  <span class="rating-text">5.0</span>
                </div>
                <div class="play-count">
                  <i class="fas fa-users"></i>
                  <span>1.2K+ players</span>
                </div>
              </div>
            </div>
          </a>
          <!-- Bilardo Game Card -->
          <a href="2048/index.html" onclick="trackGameClick('2048', 'main_grid')" class="game-card">
            <div class="card-header">
              <div class="game-badge tas">
                <i class="fas fa-brain"></i>
                <span data-i18n="badge_classic">Viral Hit</span>
              </div>
              <div class="card-actions">
                <button class="action-btn favorite">
                  <i class="far fa-heart"></i>
                </button>
                <button class="action-btn share">
                  <i class="fas fa-share"></i>
                </button>
              </div>
            </div>

            <div class="card-image">
              <img
                src="2048/logo.png"
                alt="2048 - Number Puzzle"
                loading="lazy"
                decoding="async"
              />
              <div class="play-overlay">
                <div class="play-button">
                  <i class="fas fa-play"></i>
                </div>
              </div>
            </div>

            <div class="card-content">
              <div class="game-title">
                <h4 data-i18n="game_2048_title">2048</h4>
                <span class="game-icon">üî¢</span>
              </div>
              <p class="game-description" data-i18n="game_2048_desc">
              The classic 2048 puzzle game that took the world by storm! Swipe to combine tiles and reach the coveted 2048 tile. Addictive, strategic, and endlessly fun.
              </p>
              <div class="game-features">
                <span class="feature-tag">
                  <i class="fas fa-lightbulb"></i>
                 <span data-i18n="tag_strategy">Strategy</span>
                </span>
                <span class="feature-tag">
                  <i class="fas fa-language"></i>
                  TR / EN / DE
                </span>
              </div>
              <div class="card-footer">
                <div class="rating">
                  <div class="stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                  </div>
                  <span class="rating-text">5.0</span>
                </div>
                <div class="play-count">
                  <i class="fas fa-users"></i>
                  <span>5K+ oyuncu</span>
                </div>
              </div>
            </div>
          </a>

          <!-- Wordle Game Card -->
          <a href="wordle/index.html" onclick="trackGameClick('wordle', 'main_grid')" class="game-card">
            <div class="card-header">
              <div class="game-badge brain">
                <i class="fas fa-brain"></i>
                <span data-i18n="badge_brain">Brain Teaser</span>
              </div>
              <div class="card-actions">
                <button class="action-btn favorite">
                  <i class="far fa-heart"></i>
                </button>
                <button class="action-btn share">
                  <i class="fas fa-share"></i>
                </button>
              </div>
            </div>

            <div class="card-image">
              <img src="wordle/wordlist.png" alt="Wordlist - Word Game" loading="lazy" decoding="async" />
              <div class="play-overlay">
                <div class="play-button">
                  <i class="fas fa-play"></i>
                </div>
              </div>
            </div>

            <div class="card-content">
              <div class="game-title">
                <h4 data-i18n="game_wordlist_title">Wordlist</h4>
                <span class="game-icon">üß†</span>
              </div>
              <p class="game-description" data-i18n="game_wordlist_desc">
                Challenge your vocabulary with this addictive word puzzle! Guess the hidden 5-letter word in just 6 tries. Perfect for word puzzle enthusiasts and brain training.
              </p>
              <div class="game-features">
                <span class="feature-tag">
                  <i class="fas fa-lightbulb"></i>
                  <span data-i18n="tag_brain_training">Brain Training</span>
                </span>
                <span class="feature-tag">
                  <i class="fas fa-language"></i>
                  TR / EN
                </span>
              </div>
              <div class="card-footer">
                <div class="rating">
                  <div class="stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                  </div>
                  <span class="rating-text">4.9</span>
                </div>
                <div class="play-count">
                  <i class="fas fa-users"></i>
                  <span>850+ oyuncu</span>
                </div>
              </div>
            </div>
          </a>
          <!-- Wordle Game Card -->
         
          <!-- Okey Game Card -->
          <a href="bilardo/index.html" class="game-card">
            <div class="card-header">
              <div class="game-badge card">
                <i class="fas fa-brain"></i>
                <span data-i18n="badge_pool">Rick'in uƒürak alanƒ±</span>
              </div>
              <div class="card-actions">
                <button class="action-btn favorite">
                  <i class="far fa-heart"></i>
                </button>
                <button class="action-btn share">
                  <i class="fas fa-share"></i>
                </button>
              </div>
            </div>

            <div class="card-image">
              <img
                src="bilardo/img/bilardist.png"
                alt="Bilardist - Premium Bilardo Oyunu"
                loading="lazy"
                decoding="async"
              />
              <div class="play-overlay">
                <div class="play-button">
                  <i class="fas fa-play"></i>
                </div>
              </div>
            </div>

            <div class="card-content">
              <div class="game-title">
                <h4 data-i18n="game_bilardist_title">Bilardist</h4>
                <span class="game-icon">üé±</span>
              </div>
              <p class="game-description" data-i18n="game_bilardist_desc">
                Uzaydan gelen premium bilardo deneyimi. Ger√ßek√ßi fizik motoru ve
                muhte≈üem grafiklerle bilardo oynamanƒ±n keyfini √ßƒ±kar!
              </p>
              <div class="game-features">
                <span class="feature-tag">
                  <i class="fas fa-magic"></i>
                  <span data-i18n="tag_realistic_physics">Ger√ßek√ßi Fizik</span>
                </span>
                <span class="feature-tag">
                  <i class="fas fa-language"></i>
                  TR / EN
                </span>
              </div>
              <div class="card-footer">
                <div class="rating">
                  <div class="stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                  </div>
                  <span class="rating-text">4.9</span>
                </div>
                <div class="play-count">
                  <i class="fas fa-users"></i>
                  <span>900+ oyuncu</span>
                </div>
              </div>
            </div>
          </a>
          
        </div>
      </section>

      <!-- Call to Action -->
      <section class="cta-section">
        <div class="cta-content">
          <h3 class="cta-title" data-i18n="cta_title">Bizi takip et!</h3>
          <p class="cta-description" data-i18n="cta_description">
            Yeni oyunlar ve √∂zellikler √ºzerinde √ßalƒ±≈üƒ±yoruz. G√ºncellemeler i√ßin
            takipte kalƒ±n!
          </p>
        <div class="social-icons">
            <a
              href="https://www.instagram.com/batuhanberk.space/"
              target="_blank"
              rel="noopener noreferrer"
              class="social-link instagram"
            ><i class="fab fa-instagram" style="color:#E1306C;"></i></a>
            <a
              href="https://discord.gg/EnzpuEYXFb"
              target="_blank"
              rel="noopener noreferrer"
              class="social-link discord"
            >
              <i class="fab fa-discord"></i>
            </a>
          </div>
          <div style="margin-top:12px; display:flex; flex-direction:column; gap:6px; align-items:center; text-align:center;">
            <!-- Ad moved to strategic position above -->
            <div style="display:inline-block; padding:6px 10px; background:rgba(0,0,0,0.22); border:1px solid rgba(255,255,255,0.10); border-radius:12px; backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); font-size:12px; font-weight:500; opacity:0.92;">
              <span class="fade-text" style="background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57, #ff6b6b); background-size: 300% 300%; -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; animation: gradientShift 3s ease-in-out infinite;" data-i18n="footer_copyright">¬© 2026 Gameist by <a href="https://www.batuhanberk.space" target="_blank" rel="noopener noreferrer" style="color:inherit; text-decoration:underline;">Batuhan Berk</a> ‚Äì Antalya</span>
            </div>
            <!-- Buy Me a Coffee Banner -->
            <div style="position: fixed; bottom: 10px; right: 10px; z-index: 1000; opacity: 0.7; transition: opacity 0.3s ease; text-align: center;" 
                 onmouseover="this.style.opacity='1'" 
                 onmouseout="this.style.opacity='0.7'">
              <div class="support-message" style="background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57, #ff6b6b); background-size: 300% 300%; -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent; animation: gradientShift 3s ease-in-out infinite; font-size: 11px; font-weight: 600; margin-bottom: 4px; text-shadow: 0 0 10px rgba(255,255,255,0.3); line-height: 1.2;">
                <div class="desktop-text">Support Gameist & help the game grow ‚òï</div>
                <div class="mobile-text" style="display: none;">Support Gameist<br>help it grow ‚òï</div>
              </div>
              <a href="https://buymeacoffee.com/gameist" target="_blank" rel="noopener noreferrer" style="text-decoration: none;">
                <img class="desktop-img" src="assets/buymeacoffee.png" alt="Buy Me a Coffee" style="width: 120px; height: auto; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.3);">
                <img class="mobile-img" src="assets/buymeacoffee.png" alt="Buy Me a Coffee" style="width: 100px; height: auto; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.3); display: none;">
              </a>
            </div>
            
            <style>
            @keyframes gradientShift {
              0% { background-position: 0% 50%; }
              50% { background-position: 100% 50%; }
              100% { background-position: 0% 50%; }
            }
            
            @media (max-width: 768px) {
              .desktop-text { display: none !important; }
              .mobile-text { display: block !important; font-size: 10px !important; margin-bottom: 3px !important; }
              .desktop-img { display: none !important; }
              .mobile-img { display: inline !important; }
            }
            </style>
            
            <style>
            @keyframes gradientShift {
              0% { background-position: 0% 50%; }
              50% { background-position: 100% 50%; }
              100% { background-position: 0% 50%; }
            }
            </style>
          </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Coming Soon Modal -->
    <!-- <div class="modal-overlay" id="comingSoonModal">
      <div class="modal-content">
        <div class="modal-header">
          <h4>üöÄ Yakƒ±nda Geliyor!</h4>
          <button class="modal-close" onclick="hideComingSoon()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <p>
           
          </p>
          <div class="upcoming-features">
            <div class="feature-item">
              <i class="fas fa-chess"></i>
              <span>Satran√ß Oyunu</span>
            </div>
            <div class="feature-item">
              <i class="fas fa-puzzle-piece"></i>
              <span>Puzzle Oyunlarƒ±</span>
            </div>
            <div class="feature-item">
              <i class="fas fa-trophy"></i>
              <span>Liderlik Tablosu</span>
            </div>
          </div>
        </div>
      </div>
    </div> -->

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="main.js?v=3"></script>
    <script src="hub-i18n.js?v=3"></script>
    <script src="auth-i18n.js?v=3"></script>
    
    <script>
      (function() {
        var script = document.createElement('script');
        script.async = true;
        script.src = 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9478711342689131';
        script.crossOrigin = 'anonymous';
        document.head.appendChild(script);
      })();
    </script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyD7ckcqdZWfnUx5r8uKmvu9Ikax1x5Qidk",
        authDomain: "gameist.firebaseapp.com",
        projectId: "gameist",
        storageBucket: "gameist.firebasestorage.app",
        messagingSenderId: "525659299937",
        appId: "1:525659299937:web:1c8343a25be2a994bcca20",
        measurementId: "G-WE9R0GWKM6",
        databaseURL: "https://gameist-default-rtdb.firebaseio.com/"
      };
      firebase.initializeApp(firebaseConfig);

      // Firebase Authentication Logic
      const provider = new firebase.auth.GoogleAuthProvider();
      provider.addScope('email');
      provider.addScope('profile');
      
      // Custom redirect URI for better compatibility
      provider.setCustomParameters({
        'redirect_uri': window.location.origin
      });

      // Initialize Firestore for leaderboard
      let db;
      try {
        db = firebase.firestore();
        console.log("‚úÖ Firestore initialized - leaderboard ready");
      } catch (error) {
        console.error("‚ùå Firestore initialization failed:", error);
      }

      // Make db accessible globally for stats functions
      window.gameistDB = db;

      // Logout button event listener
      document.getElementById('logout').addEventListener('click', async () => {
        try {
          await firebase.auth().signOut();
          document.getElementById('googleLogin').style.display = 'inline-flex';
          document.getElementById('userInfo').style.display = 'none';
          console.log("‚úÖ User signed out successfully");
        } catch (error) {
          console.error("‚ùå Sign out error:", error);
          const authStatus = document.getElementById('authStatus');
          authStatus.style.display = 'block';
          authStatus.innerHTML = '‚ùå √áƒ±kƒ±≈ü hatasƒ±: ' + error.message;
        }
      });

      // Handle successful authentication
      function handleAuthSuccess(result) {
        const user = result.user;
        const credential = result.credential;
        const token = credential ? credential.accessToken : 'N/A';
        
        // Update UI with user info
        document.getElementById('userName').textContent = user.displayName;
        document.getElementById('userEmailText').textContent = user.email;
        document.getElementById('userPhoto').src = user.photoURL;
        document.getElementById('googleLogin').style.display = 'none';
        document.getElementById('userInfo').style.display = 'block';
        
        // Update status with translation
        const authStatus = document.getElementById('authStatus');
        authStatus.style.display = 'block';
        authStatus.innerHTML = '‚úÖ ' + getAuthTranslation('login_success');
        
        console.log("‚úÖ Authentication successful:", {
          displayName: user.displayName,
          email: user.email,
          uid: user.uid,
          token: token.substring(0, 20) + '...'
        });
        
        // Save user session for cross-page access
        localStorage.setItem('gameist_user', JSON.stringify({
          displayName: user.displayName,
          email: user.email,
          photoURL: user.photoURL,
          uid: user.uid
        }));
        
        // Load and update user stats immediately after login
        loadUserStats(user.uid);
        
        // Leaderboard functionality ready
        if (db) {
          console.log("‚úÖ Leaderboard ready - scores can be saved");
          
          // Example: Save user score (uncomment when needed)
          // saveUserScore(user.uid, user.displayName, 0);
        }
        
        // Hide status after 3 seconds
        setTimeout(() => {
          authStatus.style.display = 'none';
        }, 3000);
      }

      // Handle authentication errors with translations
      function handleAuthError(error) {
        console.error("‚ùå Authentication error:", error);
        
        const authStatus = document.getElementById('authStatus');
        authStatus.style.display = 'block';
        
        let errorMessage;
        
        // Use translated error messages
        switch (error.code) {
          case 'auth/popup-closed-by-user':
            errorMessage = getAuthTranslation('popup_closed');
            break;
          case 'auth/popup-blocked':
            errorMessage = getAuthTranslation('popup_blocked');
            break;
          case 'auth/cancelled-popup-request':
            errorMessage = getAuthTranslation('popup_closed');
            break;
          case 'auth/unauthorized-domain':
            errorMessage = getAuthTranslation('unauthorized_domain');
            break;
          default:
            errorMessage = getAuthTranslation('login_failed') + ': ' + error.message;
        }
        
        authStatus.innerHTML = '‚ùå ' + errorMessage;
        
        // Hide status after 5 seconds
        setTimeout(() => {
          authStatus.style.display = 'none';
        }, 5000);
      }

      // Listen for authentication state changes
      firebase.auth().onAuthStateChanged((user) => {
        if (user) {
          // User is signed in - update UI
          document.getElementById('userName').textContent = user.displayName;
          document.getElementById('userEmailText').textContent = user.email;
          document.getElementById('userPhoto').src = user.photoURL;
          document.getElementById('googleLogin').style.display = 'none';
          document.getElementById('userInfo').style.display = 'block';
          
          // Save session for cross-page access
          localStorage.setItem('gameist_user', JSON.stringify({
            displayName: user.displayName,
            email: user.email,
            photoURL: user.photoURL,
            uid: user.uid
          }));
          
          console.log("‚úÖ User session active:", user.displayName);
        } else {
          // User is signed out - clear session
          document.getElementById('googleLogin').style.display = 'inline-flex';
          document.getElementById('userInfo').style.display = 'none';
          localStorage.removeItem('gameist_user');
          console.log("‚ÑπÔ∏è No active user session");
        }
      });

      // Check for saved session on page load
      function checkSavedSession() {
        const savedUser = localStorage.getItem('gameist_user');
        if (savedUser) {
          try {
            const user = JSON.parse(savedUser);
            console.log("üîÑ Restoring saved session:", user.displayName);
            
            // Update UI with saved data
            document.getElementById('userName').textContent = user.displayName;
            document.getElementById('userEmailText').textContent = user.email;
            document.getElementById('userPhoto').src = user.photoURL;
            document.getElementById('googleLogin').style.display = 'none';
            document.getElementById('userInfo').style.display = 'block';
            
            // Load user stats when session is restored
            if (user.uid) {
              loadUserStats(user.uid);
            }
          } catch (e) {
            console.error("‚ùå Failed to restore session:", e);
            localStorage.removeItem('gameist_user');
          }
        }
      }

      // Profile button handler
      document.getElementById('profileBtn').addEventListener('click', function() {
        const user = JSON.parse(localStorage.getItem('gameist_user') || '{}');
        showProfileModal(user);
      });

      // Leaderboard button handler
      document.getElementById('leaderboardBtn').addEventListener('click', function() {
        showLeaderboardModal();
      });

      // Refresh stats button handler
      document.getElementById('refreshStatsBtn').addEventListener('click', function() {
        const savedUser = localStorage.getItem('gameist_user');
        if (savedUser) {
          const user = JSON.parse(savedUser);
          console.log('üîÑ Manual refresh triggered for user:', user.displayName);
          loadUserStats(user.uid);
        } else {
          console.log('‚ùå No saved user found for refresh');
        }
      });

      // Manual test button for debugging
      setTimeout(() => {
        const savedUser = localStorage.getItem('gameist_user');
        if (savedUser) {
          const user = JSON.parse(savedUser);
          console.log('üß™ Auto-test loadUserStats for user:', user.displayName);
          loadUserStats(user.uid);
        }
      }, 2000);

      // Show profile modal
      function showProfileModal(user) {
        const modal = document.createElement('div');
        modal.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0,0,0,0.8);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          backdrop-filter: blur(5px);
        `;
        
        modal.innerHTML = `
          <div style="background: linear-gradient(145deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0.05) 100%); padding: 30px; border-radius: 20px; backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.3); box-shadow: 0 20px 40px rgba(0,0,0,0.3); max-width: 400px; width: 90%; position: relative;">
            <button onclick="this.closest('div').parentElement.remove()" style="position: absolute; top: 15px; right: 15px; background: rgba(255,255,255,0.2); border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer; color: white; font-size: 16px; display: flex; align-items: center; justify-content: center;">√ó</button>
            
            <div style="text-align: center; margin-bottom: 20px;">
              <img src="${user.photoURL || 'https://via.placeholder.com/80'}" style="width: 80px; height: 80px; border-radius: 50%; border: 3px solid rgba(255,255,255,0.4); margin-bottom: 15px; box-shadow: 0 8px 24px rgba(0,0,0,0.2);">
              <h2 style="color: white; margin: 0; font-size: 24px; font-weight: 700;">${user.displayName}</h2>
              <p style="color: rgba(255,255,255,0.8); margin: 5px 0; font-size: 14px;">${user.email}</p>
              <p style="color: rgba(255,255,255,0.6); margin: 0; font-size: 12px;">ID: ${user.uid}</p>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
              <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center;">
                <div style="color: #fbbf24; font-size: 24px; font-weight: 700;">üèÜ</div>
                <div style="color: rgba(255,255,255,0.8); font-size: 12px; margin-bottom: 5px;">Elementist Best Score</div>
                <div id="modalTotalScore" style="color: white; font-size: 20px; font-weight: 700;">0</div>
              </div>
              <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center;">
                <div style="color: #60a5fa; font-size: 24px; font-weight: 700;">üéÆ</div>
                <div style="color: rgba(255,255,255,0.8); font-size: 12px; margin-bottom: 5px;">${getAuthTranslation('games_played')}</div>
                <div id="modalGamesPlayed" style="color: white; font-size: 20px; font-weight: 700;">0</div>
              </div>
            </div>
            
            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
              <h3 style="color: white; margin: 0 0 10px 0; font-size: 16px;">üéØ Game Stats</h3>
              <div id="gameStats" style="color: rgba(255,255,255,0.8); font-size: 14px; line-height: 1.6;">
                Loading game statistics...
              </div>
            </div>
            
            <button onclick="this.closest('div').parentElement.remove()" style="width: 100%; padding: 12px; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: 600;">
              Close
            </button>
          </div>
        `;
        
        document.body.appendChild(modal);
        loadUserStats(user.uid);
      }

      // Show leaderboard modal
      function showLeaderboardModal() {
        const modal = document.createElement('div');
        modal.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0,0,0,0.8);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          backdrop-filter: blur(5px);
        `;
        
        modal.innerHTML = `
          <div style="background: linear-gradient(145deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0.05) 100%); padding: 30px; border-radius: 20px; backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.3); box-shadow: 0 20px 40px rgba(0,0,0,0.3); max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto; position: relative;">
            <button onclick="this.closest('div').parentElement.remove()" style="position: absolute; top: 15px; right: 15px; background: rgba(255,255,255,0.2); border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer; color: white; font-size: 16px; display: flex; align-items: center; justify-content: center;">√ó</button>
            
            <h2 style="color: white; margin: 0 0 20px 0; text-align: center; font-size: 28px; font-weight: 700;">üèÜ ${getAuthTranslation('leaderboard_button')}</h2>
            
            <div style="margin-bottom: 20px;">
              <select id="gameFilter" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); border-radius: 8px; color: white; font-size: 14px;">
                <option value="all">All Games</option>
                <option value="elementist">Elementist</option>
                <option value="2048">2048</option>
                <option value="wordlist">Wordlist</option>
                <option value="bilardist">Bilardist</option>
              </select>
            </div>
            
            <div id="leaderboardContent" style="color: white;">
              <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.6);">
                Loading leaderboard...
              </div>
            </div>
          </div>
        `;
        
        document.body.appendChild(modal);
        
        // Load leaderboard data
        const gameFilter = modal.querySelector('#gameFilter');
        gameFilter.addEventListener('change', () => loadLeaderboard(gameFilter.value));
        loadLeaderboard('all');
      }

      // Load user statistics
      async function loadUserStats(userId) {
        console.log('üìä Loading user stats for:', userId);
        
        try {
          const database = window.gameistDB || db;
          if (!database) {
            console.error('‚ùå Database not available');
            return;
          }
          
          console.log('üîç Querying leaderboard for user:', userId);
          const snapshot = await database.collection('leaderboard')
            .where('userId', '==', userId)
            .orderBy('timestamp', 'desc')
            .get();
          
          const scores = snapshot.docs.map(doc => doc.data());
          console.log('üìà Found scores from Firestore:', scores.length);
          
          // Also check localStorage for fallback scores
          const localScores = JSON.parse(localStorage.getItem('gameist_local_scores') || '[]');
          const userLocalScores = localScores.filter(score => score.userId === userId);
          console.log('üìà Found scores from localStorage:', userLocalScores.length);
          
          // Check cloud storage fallback for cross-device sync
          const cloudKey = `gameist_scores_${userId}`;
          const cloudScores = JSON.parse(localStorage.getItem(cloudKey) || '[]');
          console.log('üìà Found scores from cloud storage fallback:', cloudScores.length);
          
          // Check Firebase Realtime Database for cross-device sync
          let realtimeScores = [];
          try {
            console.log('üîç Checking Realtime Database for cross-device sync...');
            const database = firebase.database();
            const userScoresRef = database.ref(`userScores/${userId}`);
            
            const snapshot = await userScoresRef.once('value');
            const data = snapshot.val();
            
            if (data) {
              realtimeScores = Object.values(data).map(score => ({
                ...score,
                userId: userId,
                timestamp: score.timestamp || Date.now()
              }));
              console.log('üìà Found scores from Realtime Database:', realtimeScores.length);
              realtimeScores.forEach(score => {
                console.log(`üìÑ Realtime score: ${score.game} - ${score.score} pts`);
              });
            } else {
              console.log('üì≠ No scores found in Realtime Database');
            }
          } catch (error) {
            console.error('‚ùå Error accessing Realtime Database:', error);
            console.log('‚ö†Ô∏è Falling back to localStorage for 2048 scores...');
            
            // Fallback: Check localStorage for 2048 scores
            const local2048Score = localStorage.getItem('2048_best_score');
            if (local2048Score) {
              const score = parseInt(local2048Score);
              if (!isNaN(score) && score > 0) {
                realtimeScores.push({
                  userId: userId,
                  game: '2048',
                  score: score,
                  timestamp: Date.now(),
                  fromLocal: true
                });
                console.log(`üì± Found 2048 score from localStorage: ${score}`);
              }
            }
          }
          
          // Combine all scores and sort by timestamp (newest first)
          const allScores = [...scores, ...userLocalScores, ...cloudScores, ...realtimeScores];
          
          // Sort by timestamp to get LATEST scores first
          allScores.sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));
          
          console.log('üìà Total combined scores:', allScores.length);
          console.log('üïê Latest scores first:', allScores.slice(0, 3).map(s => `${s.game}: ${s.score} (${new Date(s.timestamp).toLocaleTimeString()})`));
          
          // Calculate HIGHEST score per game (using LATEST scores)
          const gameHighScores = {};
          allScores.forEach(score => {
            if (!gameHighScores[score.game] || gameHighScores[score.game].score < score.score) {
              gameHighScores[score.game] = {
                score: score.score,
                timestamp: score.timestamp,
                game: score.game
              };
            }
          });
          
          // Debug: Log all game names found
          console.log('üéÆ All game names found in database:', [...new Set(allScores.map(s => s.game))]);
          console.log('üìä All scores:', allScores.slice(0, 10).map(s => ({ game: s.game, score: s.score, timestamp: new Date(s.timestamp).toLocaleString() })));
          
          // Debug: Check specifically for 2048 scores
          const game2048Scores = allScores.filter(s => s.game === '2048');
          console.log('üî¢ 2048 scores found:', game2048Scores.length);
          if (game2048Scores.length > 0) {
            console.log('üî¢ 2048 score details:', game2048Scores.map(s => ({ score: s.score, timestamp: new Date(s.timestamp).toLocaleString() })));
          }
          
          // Get individual game scores - check for multiple possible game names
          const elementistBestScore = gameHighScores['elementist']?.score || 0;
          const game2048BestScore = gameHighScores['2048']?.score || gameHighScores['game2048']?.score || 0;
          
          console.log('üíØ Raw gameHighScores for 2048:', gameHighScores['2048']);
          console.log('üíØ Final 2048 best score from database:', game2048BestScore);
          
          // Try to get 2048 best score from DOM if available
          let dom2048BestScore = 0;
          try {
            // Check if we're on the 2048 game page
            if (window.location.pathname.includes('/2048/') || window.location.href.includes('/2048/')) {
              const game2048BestEl = document.getElementById('best-score');
              if (game2048BestEl && game2048BestEl.textContent) {
                const scoreFrom2048DOM = parseInt(game2048BestEl.textContent.replace(/,/g, '').trim());
                if (!isNaN(scoreFrom2048DOM) && scoreFrom2048DOM > 0) {
                  dom2048BestScore = scoreFrom2048DOM;
                  console.log(`üî¢ Got 2048 best score from 2048 page DOM: ${dom2048BestScore}`);
                }
              }
            } else {
              console.log('‚ÑπÔ∏è Not on 2048 page, cannot get DOM score directly');
            }
          } catch (error) {
            console.log('‚ÑπÔ∏è Could not get 2048 score from DOM (game not loaded)');
          }
          
          // Use the higher of database or DOM score for 2048
          const final2048BestScore = Math.max(game2048BestScore, dom2048BestScore);
          
          // Calculate total score from individual game best scores only
          const totalScore = elementistBestScore + final2048BestScore;
          const gamesPlayed = new Set(allScores.map(s => s.game)).size;
          
          console.log('üìä Calculated stats:', { 
            totalScore, 
            elementistBestScore, 
            game2048BestScore: final2048BestScore,
            dom2048BestScore,
            gamesPlayed 
          });
          
          // Update carousel displays
          const totalScoreEl = document.getElementById('totalScoreDisplay');
          const elementistBestEl = document.getElementById('elementistBestDisplay');
          const game2048BestEl = document.getElementById('2048BestDisplay');
          
          if (totalScoreEl) totalScoreEl.textContent = totalScore.toLocaleString();
          if (elementistBestEl) elementistBestEl.textContent = elementistBestScore.toLocaleString();
          if (game2048BestEl) game2048BestEl.textContent = final2048BestScore.toLocaleString();
          
          // Update modal stats
          const modalTotalScore = document.getElementById('modalTotalScore');
          const modalGamesPlayed = document.getElementById('modalGamesPlayed');
          const gameStats = document.getElementById('gameStats');
          
          if (modalTotalScore) modalTotalScore.textContent = totalScore.toLocaleString();
          if (modalGamesPlayed) modalGamesPlayed.textContent = gamesPlayed;
          
          // Update main UI stats (legacy elements)
          const userTotalScoreEl = document.getElementById('userTotalScore');
          const userGamesPlayedEl = document.getElementById('userGamesPlayed');
          
          if (userTotalScoreEl) {
            userTotalScoreEl.textContent = totalScore.toLocaleString();
            console.log('‚úÖ Updated main UI total score:', totalScore);
          } else {
            console.error('‚ùå userTotalScore element not found');
          }
          
          if (userGamesPlayedEl) {
            userGamesPlayedEl.textContent = gamesPlayed;
            console.log('‚úÖ Updated main UI games played:', gamesPlayed);
          } else {
            console.error('‚ùå userGamesPlayed element not found');
          }
          
          // Game-specific stats
          const gameStatsMap = {};
          allScores.forEach(score => {
            if (!gameStatsMap[score.game]) {
              gameStatsMap[score.game] = { count: 0, highScore: 0 };
            }
            gameStatsMap[score.game].count++;
            gameStatsMap[score.game].highScore = Math.max(gameStatsMap[score.game].highScore, score.score);
          });
          
          console.log('üéÆ Game stats map:', gameStatsMap);
          
          if (gameStats) {
            let statsHTML = '';
            for (const [game, stats] of Object.entries(gameStatsMap)) {
              statsHTML += `
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                  <span>${game.charAt(0).toUpperCase() + game.slice(1)}</span>
                  <span>${stats.highScore} (${stats.count} games)</span>
                </div>
              `;
            }
            gameStats.innerHTML = statsHTML || '<div>No games played yet</div>';
            console.log('‚úÖ Updated game stats HTML');
          }
          
          console.log('‚úÖ User stats loaded successfully');
          
        } catch (error) {
          console.error('Error loading user stats:', error);
        }
      }

      // Load leaderboard
      async function loadLeaderboard(gameFilter = 'all') {
        try {
          let query = db.collection('leaderboard');
          
          if (gameFilter !== 'all') {
            query = query.where('game', '==', gameFilter);
          }
          
          const snapshot = await query
            .orderBy('score', 'desc')
            .limit(50)
            .get();
          
          const scores = snapshot.docs.map(doc => ({
            id: doc.id,
            ...doc.data()
          }));
          
          // Group by user and get highest score
          const userHighScores = {};
          scores.forEach(score => {
            const key = score.userId;
            if (!userHighScores[key] || userHighScores[key].score < score.score) {
              userHighScores[key] = score;
            }
          });
          
          // Sort by score
          const leaderboard = Object.values(userHighScores)
            .sort((a, b) => b.score - a.score)
            .slice(0, 20);
          
          const leaderboardContent = document.getElementById('leaderboardContent');
          if (leaderboardContent) {
            leaderboardContent.innerHTML = `
              <div style="background: rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden;">
                ${leaderboard.map((entry, index) => `
                  <div style="display: flex; align-items: center; padding: 12px; border-bottom: 1px solid rgba(255,255,255,0.1); ${index < 3 ? 'background: linear-gradient(90deg, rgba(255,215,0,0.1) 0%, transparent 100%);' : ''}">
                    <div style="width: 30px; text-align: center; font-weight: 700; color: ${index < 3 ? '#fbbf24' : 'rgba(255,255,255,0.8)'};">
                      ${index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : index + 1}
                    </div>
                    <img src="${entry.photoURL || 'https://via.placeholder.com/40'}" style="width: 40px; height: 40px; border-radius: 50%; margin: 0 12px; border: 2px solid rgba(255,255,255,0.3);">
                    <div style="flex: 1;">
                      <div style="color: white; font-weight: 600; font-size: 14px;">${entry.displayName}</div>
                      <div style="color: rgba(255,255,255,0.6); font-size: 12px;">${entry.game}</div>
                    </div>
                    <div style="text-align: right;">
                      <div style="color: #fbbf24; font-weight: 700; font-size: 16px;">${entry.score.toLocaleString()}</div>
                      <div style="color: rgba(255,255,255,0.6); font-size: 11px;">points</div>
                    </div>
                  </div>
                `).join('')}
              </div>
            `;
          }
          
        } catch (error) {
          console.error('Error loading leaderboard:', error);
          const leaderboardContent = document.getElementById('leaderboardContent');
          if (leaderboardContent) {
            leaderboardContent.innerHTML = '<div style="text-align: center; color: rgba(255,255,255,0.6);">Error loading leaderboard</div>';
          }
        }
      }

      // Carousel functionality
      let currentSlide = 0;
      const totalSlides = 3;
      let autoRotateInterval;
      let touchStartX = 0;
      let touchEndX = 0;
      
      function startAutoRotate() {
        autoRotateInterval = setInterval(nextSlide, 3000);
      }
      
      function stopAutoRotate() {
        if (autoRotateInterval) {
          clearInterval(autoRotateInterval);
        }
      }
      
      // Swipe functionality
      function handleSwipe() {
        const swipeThreshold = 50;
        const diff = touchStartX - touchEndX;
        
        if (Math.abs(diff) > swipeThreshold) {
          if (diff > 0) {
            // Swipe left - next slide
            nextSlide();
          } else {
            // Swipe right - previous slide
            prevSlide();
          }
          // Restart auto-rotate after swipe
          stopAutoRotate();
          startAutoRotate();
        }
      }
      
      function prevSlide() {
        currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
        updateCarousel();
      }
      
      function updateCarousel() {
        const container = document.getElementById('carouselContainer');
        const indicators = document.querySelectorAll('.indicator');
        
        if (container) {
          container.style.transform = `translateX(-${currentSlide * 100}%)`;
        }
        
        // Update indicators
        indicators.forEach((indicator, index) => {
          indicator.style.background = index === currentSlide 
            ? 'rgba(255,255,255,0.6)' 
            : 'rgba(255,255,255,0.3)';
        });
      }
      
      function nextSlide() {
        currentSlide = (currentSlide + 1) % totalSlides;
        updateCarousel();
      }
      
      function goToSlide(slideIndex) {
        currentSlide = slideIndex;
        updateCarousel();
      }
      
      // Auto-rotate carousel every 3 seconds
      startAutoRotate();
      
      // Add click handlers to indicators
      document.addEventListener('DOMContentLoaded', () => {
        const indicators = document.querySelectorAll('.indicator');
        const carousel = document.getElementById('scoreCarousel');
        
        indicators.forEach((indicator, index) => {
          indicator.addEventListener('click', () => {
            goToSlide(index);
            // Restart auto-rotate after manual change
            stopAutoRotate();
            startAutoRotate();
          });
          
          // Add hover effects
          indicator.addEventListener('mouseenter', () => {
            indicator.style.background = 'rgba(255,255,255,0.8)';
            indicator.style.transform = 'scale(1.2)';
          });
          
          indicator.addEventListener('mouseleave', () => {
            const isActive = parseInt(indicator.dataset.slide) === currentSlide;
            indicator.style.background = isActive ? 'rgba(255,255,255,0.6)' : 'rgba(255,255,255,0.3)';
            indicator.style.transform = 'scale(1)';
          });
        });
        
        // Add touch events for swipe
        if (carousel) {
          // Touch events for mobile swipe
          carousel.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
          }, { passive: true });
          
          carousel.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
          }, { passive: true });
          
          // Mouse events for desktop swipe
          let mouseDown = false;
          carousel.addEventListener('mousedown', (e) => {
            mouseDown = true;
            touchStartX = e.screenX;
            carousel.style.cursor = 'grabbing';
          });
          
          carousel.addEventListener('mouseup', (e) => {
            if (mouseDown) {
              mouseDown = false;
              touchEndX = e.screenX;
              handleSwipe();
              carousel.style.cursor = 'grab';
            }
          });
          
          carousel.addEventListener('mouseleave', () => {
            mouseDown = false;
            carousel.style.cursor = 'grab';
          });
          
          // Set initial cursor
          carousel.style.cursor = 'grab';
          
          // Pause auto-rotate on carousel hover
          carousel.addEventListener('mouseenter', stopAutoRotate);
          carousel.addEventListener('mouseleave', startAutoRotate);
        }
      });
      
      // Check for 2048 DOM score updates periodically
      function check2048DOMScore() {
        try {
          // Only check if we're on the 2048 page
          if (window.location.pathname.includes('/2048/') || window.location.href.includes('/2048/')) {
            const game2048BestEl = document.getElementById('best-score');
            if (game2048BestEl && game2048BestEl.textContent) {
              const scoreFrom2048DOM = parseInt(game2048BestEl.textContent.replace(/,/g, '').trim());
              if (!isNaN(scoreFrom2048DOM) && scoreFrom2048DOM > 0) {
                const current2048Display = document.getElementById('2048BestDisplay');
                const currentDisplayedScore = parseInt(current2048Display.textContent.replace(/,/g, '')) || 0;
                
                if (scoreFrom2048DOM > currentDisplayedScore) {
                  console.log(`üî¢ 2048 DOM score updated: ${currentDisplayedScore} ‚Üí ${scoreFrom2048DOM}`);
                  if (current2048Display) {
                    current2048Display.textContent = scoreFrom2048DOM.toLocaleString();
                  }
                  // Update total score
                  const elementistScore = parseInt(document.getElementById('elementistBestDisplay').textContent.replace(/,/g, '')) || 0;
                  const newTotal = elementistScore + scoreFrom2048DOM;
                  const totalDisplay = document.getElementById('totalScoreDisplay');
                  if (totalDisplay) {
                    totalDisplay.textContent = newTotal.toLocaleString();
                  }
                }
              }
            }
          }
        } catch (error) {
          // Silent fail - 2048 game not loaded
        }
      }
      
      // Check 2048 DOM score every 5 seconds
      setInterval(check2048DOMScore, 5000);
      
      // Debug function for carousel testing (call from console)
      function debugCarousel() {
        console.log('üé† Carousel Debug:');
        console.log('Current slide:', currentSlide);
        console.log('Total slides:', totalSlides);
        console.log('Carousel element:', document.getElementById('scoreCarousel'));
        console.log('Container element:', document.getElementById('carouselContainer'));
        console.log('Indicators:', document.querySelectorAll('.indicator').length);
        
        // Test page detection
        console.log('üåê Page Detection:');
        console.log('Current URL:', window.location.href);
        console.log('Current pathname:', window.location.pathname);
        console.log('Is 2048 page:', window.location.pathname.includes('/2048/') || window.location.href.includes('/2048/'));
        
        // Test 2048 DOM element
        const bestScoreEl = document.getElementById('best-score');
        console.log('2048 best-score element:', bestScoreEl);
        if (bestScoreEl) {
          console.log('2048 best-score content:', bestScoreEl.textContent);
        }
        
        // Test swipe simulation
        console.log('üß™ Testing swipe functions:');
        console.log('nextSlide() - go to slide', (currentSlide + 1) % totalSlides);
        console.log('prevSlide() - go to slide', (currentSlide - 1 + totalSlides) % totalSlides);
        console.log('goToSlide(2) - go to slide 2');
      }
      
      // Manual function to check 2048 scores directly
      async function check2048Scores() {
        try {
          console.log('üîç Manual 2048 score check...');
          const user = firebase.auth().currentUser;
          if (!user) {
            console.log('‚ùå No user logged in');
            return;
          }
          
          // Check Realtime Database directly
          const database = firebase.database();
          const userScoresRef = database.ref(`userScores/${user.uid}`);
          
          const snapshot = await userScoresRef.once('value');
          const data = snapshot.val();
          
          if (data) {
            const scores = Object.values(data);
            const game2048Scores = scores.filter(s => s.game === '2048');
            
            console.log(`üî¢ Found ${game2048Scores.length} 2048 scores in Realtime Database:`);
            game2048Scores.forEach(score => {
              console.log(`  - Score: ${score.score}, Time: ${new Date(score.timestamp).toLocaleString()}`);
            });
            
            if (game2048Scores.length > 0) {
              const best2048Score = Math.max(...game2048Scores.map(s => s.score));
              console.log(`üèÜ Best 2048 score: ${best2048Score}`);
              
              // Update the carousel display
              const game2048BestEl = document.getElementById('2048BestDisplay');
              if (game2048BestEl) {
                game2048BestEl.textContent = best2048Score.toLocaleString();
                console.log('‚úÖ Updated 2048 carousel display');
              }
            } else {
              console.log('‚ùå No 2048 scores found');
            }
          } else {
            console.log('‚ùå No scores found in Realtime Database');
          }
        } catch (error) {
          console.error('‚ùå Error checking 2048 scores:', error);
        }
      }
      
      // Manual function to test 2048 score saving with cross-device sync
      async function test2048Score(score = 2048) {
        try {
          console.log('üß™ Testing 2048 score saving with cross-device sync...');
          const user = firebase.auth().currentUser;
          if (!user) {
            console.log('‚ùå No user logged in');
            return;
          }
          
          // Sync to all devices
          await syncScoreToAllDevices('2048', score);
          
          // Check immediately
          await check2048Scores();
          
        } catch (error) {
          console.error('‚ùå Error testing 2048 score:', error);
        }
      }
      
      // Function to manually set 2048 score with cross-device sync
      async function set2048Score(score) {
        console.log(`ÔøΩ Setting 2048 score to ${score} with cross-device sync...`);
        
        // Update display immediately
        const game2048BestEl = document.getElementById('2048BestDisplay');
        if (game2048BestEl) {
          game2048BestEl.textContent = score.toLocaleString();
          console.log('‚úÖ Updated 2048 carousel display');
        }
        
        // Update total score
        const elementistScore = parseInt(document.getElementById('elementistBestDisplay').textContent.replace(/,/g, '')) || 0;
        const newTotal = elementistScore + score;
        const totalDisplay = document.getElementById('totalScoreDisplay');
        if (totalDisplay) {
          totalDisplay.textContent = newTotal.toLocaleString();
        }
        
        // Sync to all devices
        await syncScoreToAllDevices('2048', score);
      }
      
      // Real-time cross-device synchronization
      function setupRealtimeSync() {
        const user = firebase.auth().currentUser;
        if (!user) return;
        
        console.log('üîÑ Setting up real-time cross-device sync for user:', user.displayName);
        
        try {
          const database = firebase.database();
          const userScoresRef = database.ref(`userScores/${user.uid}`);
          
          // Listen for real-time updates from any device
          userScoresRef.on('value', (snapshot) => {
            console.log('üì° Real-time score update detected from another device!');
            const data = snapshot.val();
            
            if (data) {
              const scores = Object.values(data);
              
              // Update localStorage with latest data
              const game2048Scores = scores.filter(s => s.game === '2048');
              if (game2048Scores.length > 0) {
                const best2048Score = Math.max(...game2048Scores.map(s => s.score));
                localStorage.setItem('2048_best_score', best2048Score.toString());
                console.log(`üíæ Synced 2048 score to localStorage: ${best2048Score}`);
              }
              
              // Reload stats to update UI
              loadUserStats(user.uid);
            }
          });
          
          console.log('‚úÖ Real-time sync listener active');
        } catch (error) {
          console.error('‚ùå Error setting up real-time sync:', error);
        }
      }
      
      // Enhanced score saving with cross-device sync
      async function syncScoreToAllDevices(game, score) {
        const user = firebase.auth().currentUser;
        if (!user) return;
        
        try {
          console.log(`üîÑ Syncing ${game} score ${score} to all devices...`);
          
          // Save to Firebase Realtime Database (primary sync source)
          const database = firebase.database();
          const userScoresRef = database.ref(`userScores/${user.uid}`);
          const newScoreRef = userScoresRef.push();
          
          await newScoreRef.set({
            userId: user.uid,
            displayName: user.displayName,
            email: user.email,
            score: score,
            game: game,
            timestamp: Date.now(),
            syncSource: 'main_menu'
          });
          
          // Save to localStorage as backup
          if (game === '2048') {
            localStorage.setItem('2048_best_score', score.toString());
          }
          
          console.log(`‚úÖ ${game} score synced to all devices`);
          
          // Notify other tabs via BroadcastChannel
          try {
            const channel = new BroadcastChannel('gameist_stats');
            channel.postMessage({
              type: 'score_update',
              game: game,
              score: score,
              userId: user.uid,
              timestamp: Date.now()
            });
          } catch (error) {
            console.log('BroadcastChannel not available');
          }
          
        } catch (error) {
          console.error(`‚ùå Error syncing ${game} score:`, error);
          
          // Fallback to localStorage only
          if (game === '2048') {
            localStorage.setItem('2048_best_score', score.toString());
            console.log(`‚ö†Ô∏è ${game} score saved to localStorage only (Firebase failed)`);
          }
        }
      }
      
      // Test cross-device synchronization
      async function testCrossDeviceSync() {
        console.log('üåê Testing cross-device synchronization...');
        const user = firebase.auth().currentUser;
        if (!user) {
          console.log('‚ùå No user logged in');
          return;
        }
        
        try {
          // Test 2048 score sync
          const testScore = 9999;
          console.log(`üß™ Testing 2048 score sync: ${testScore}`);
          await syncScoreToAllDevices('2048', testScore);
          
          // Wait a moment for sync
          setTimeout(async () => {
            await check2048Scores();
            console.log('‚úÖ Cross-device sync test completed');
          }, 1000);
          
        } catch (error) {
          console.error('‚ùå Cross-device sync test failed:', error);
        }
      }
      
      // Initialize session check
      checkSavedSession();
      
      // Setup real-time sync when user is available
      firebase.auth().onAuthStateChanged((user) => {
        if (user) {
          console.log('üë§ User authenticated, setting up real-time sync...');
          setupRealtimeSync();
        }
      });
      
      // Create BroadcastChannel for cross-page communication
      const gameistChannel = new BroadcastChannel('gameist_stats');
      
      // Listen for stats updates from other pages using BroadcastChannel
      function listenForStatsUpdates() {
        try {
          const gameistChannel = new BroadcastChannel('gameist_stats');
          
          gameistChannel.onmessage = (event) => {
            console.log('üì° Received BroadcastChannel message:', event.data);
            
            if (event.data && event.data.type === 'statsUpdate') {
              console.log('üìä Processing stats update from game:', event.data.game);
              const currentUser = firebase.auth().currentUser;
              if (currentUser && currentUser.uid === event.data.userId) {
                loadUserStats(currentUser.uid);
              }
            }
            
            // Handle live score updates from Elementist
            if (event.data && event.data.type === 'score_update' && event.data.game === 'elementist') {
              console.log('üéÆ Processing live score update from Elementist:', event.data);
              const currentUser = firebase.auth().currentUser;
              
              if (currentUser && currentUser.uid === event.data.userId) {
                console.log(`‚úÖ Live Elementist score: ${event.data.score} (+${event.data.scoreIncrease})`);
                
                // Only update if it's a new best score
                const currentBestScore = parseInt(document.getElementById('elementistBestDisplay').textContent.replace(/,/g, '')) || 0;
                if (event.data.score > currentBestScore) {
                  console.log(`üéâ NEW BEST SCORE! ${currentBestScore} ‚Üí ${event.data.score}`);
                  
                  // Update Elementist carousel slide immediately
                  const elementistBestEl = document.getElementById('elementistBestDisplay');
                  if (elementistBestEl) {
                    elementistBestEl.textContent = event.data.score.toLocaleString();
                    console.log('‚úÖ Updated Elementist carousel slide with new best score');
                  }
                  
                  // Update legacy element for compatibility
                  const userTotalScoreEl = document.getElementById('userTotalScore');
                  if (userTotalScoreEl) {
                    userTotalScoreEl.textContent = event.data.score.toLocaleString();
                    console.log('‚úÖ Updated legacy UI with new Elementist best score');
                  }
                } else {
                  console.log(`‚ÑπÔ∏è Not a new best score (${event.data.score} ‚â§ ${currentBestScore})`);
                }
                
                // Load full stats to ensure consistency
                loadUserStats(currentUser.uid);
              }
            }
            
            // Handle live score updates from 2048
            if (event.data && event.data.type === 'score_update' && event.data.game === '2048') {
              console.log('üéÆ Processing live score update from 2048:', event.data);
              const currentUser = firebase.auth().currentUser;
              
              if (currentUser && currentUser.uid === event.data.userId) {
                console.log(`‚úÖ Live 2048 score: ${event.data.score} (+${event.data.scoreIncrease})`);
                
                // Only update if it's a new best score
                const currentBestScore = parseInt(document.getElementById('2048BestDisplay').textContent.replace(/,/g, '')) || 0;
                if (event.data.score > currentBestScore) {
                  console.log(`üéâ NEW 2048 BEST SCORE! ${currentBestScore} ‚Üí ${event.data.score}`);
                  
                  // Update 2048 carousel slide immediately
                  const game2048BestEl = document.getElementById('2048BestDisplay');
                  if (game2048BestEl) {
                    game2048BestEl.textContent = event.data.score.toLocaleString();
                    console.log('‚úÖ Updated 2048 carousel slide with new best score');
                  }
                  
                  // Update total score
                  const currentElementistScore = parseInt(document.getElementById('elementistBestDisplay').textContent.replace(/,/g, '')) || 0;
                  const newTotal = currentElementistScore + event.data.score;
                  const totalDisplay = document.getElementById('totalScoreDisplay');
                  if (totalDisplay) {
                    totalDisplay.textContent = newTotal.toLocaleString();
                  }
                } else {
                  console.log(`‚ÑπÔ∏è Not a new 2048 best score (${event.data.score} ‚â§ ${currentBestScore})`);
                }
                
                // Load full stats to ensure consistency
                loadUserStats(currentUser.uid);
              }
            }
          };
          
          console.log('ÔøΩ BroadcastChannel listener initialized for stats updates');
        } catch (error) {
          console.error('‚ùå Error setting up BroadcastChannel listener:', error);
          
          setInterval(() => {
            const updateNeeded = localStorage.getItem('gameist_stats_update_needed');
            if (updateNeeded) {
              try {
                const data = JSON.parse(updateNeeded);
                console.log('üìä Processing stats update from localStorage:', data);
                
                const currentUser = firebase.auth().currentUser;
                if (currentUser && currentUser.uid === data.userId) {
                  console.log('‚úÖ Processing localStorage stats update...');
                  loadUserStats(currentUser.uid);
                  localStorage.removeItem('gameist_stats_update_needed');
                  
                  // If Firestore failed, sync to cloud storage
                  if (!data.firestoreSuccess) {
                    syncToCloudStorage(data);
                  }
                }
              } catch (error) {
                console.error('‚ùå Error processing localStorage update:', error);
                localStorage.removeItem('gameist_stats_update_needed');
              }
            }
          }, 1000);
        }
      }
      
      // Also poll for live score updates from Elementist (localStorage fallback)
      setInterval(() => {
        try {
          const liveUpdate = localStorage.getItem('gameist_live_score_update');
          if (liveUpdate) {
            const data = JSON.parse(liveUpdate);
            const currentUser = firebase.auth().currentUser;
            
            if (currentUser && currentUser.uid === data.userId && data.game === 'elementist') {
              console.log('üéÆ Processing live Elementist score from localStorage:', data);
              
              // Only update if it's a new best score
              const currentBestScore = parseInt(document.getElementById('elementistBestDisplay').textContent.replace(/,/g, '')) || 0;
              if (data.score > currentBestScore) {
                console.log(`üéâ NEW BEST SCORE from localStorage! ${currentBestScore} ‚Üí ${data.score}`);
                
                // Update Elementist carousel slide immediately
                const elementistBestEl = document.getElementById('elementistBestDisplay');
                if (elementistBestEl) {
                  elementistBestEl.textContent = data.score.toLocaleString();
                  console.log('‚úÖ Updated Elementist carousel slide from localStorage');
                }
                
                // Update legacy element for compatibility
                const userTotalScoreEl = document.getElementById('userTotalScore');
                if (userTotalScoreEl) {
                  userTotalScoreEl.textContent = data.score.toLocaleString();
                  console.log('‚úÖ Updated legacy UI from localStorage');
                }
              } else {
                console.log(`‚ÑπÔ∏è Not a new best score from localStorage (${data.score} ‚â§ ${currentBestScore})`);
              }
              
              // Load full stats
              loadUserStats(currentUser.uid);
              
              // Clear the live update
              localStorage.removeItem('gameist_live_score_update');
            }
          }
        } catch (error) {
          console.error('‚ùå Error processing live score update:', error);
        }
      }, 2000); // Check every 2 seconds
      
      // Sync scores to cloud storage for cross-device sync when Firestore is down
      function syncToCloudStorage(scoreData) {
        try {
          console.log('‚òÅÔ∏è Syncing to Firebase Realtime Database fallback...');
          
          // Use Firebase Realtime Database as fallback for cross-device sync
          const database = firebase.database();
          const userScoresRef = database.ref(`userScores/${scoreData.userId}`);
          
          // Push the score to Realtime Database
          const newScoreRef = userScoresRef.push();
          newScoreRef.set({
            score: scoreData.score,
            game: scoreData.game,
            timestamp: scoreData.timestamp,
            displayName: scoreData.displayName || 'Unknown',
            firestoreFailed: true
          }).then(() => {
            console.log('‚úÖ Score synced to Firebase Realtime Database fallback');
          }).catch(error => {
            console.error('‚ùå Error syncing to Realtime Database:', error);
            
            // Final fallback: localStorage (device only)
            const cloudKey = `gameist_scores_${scoreData.userId}`;
            const existingData = JSON.parse(localStorage.getItem(cloudKey) || '[]');
            
            const exists = existingData.some(score => 
              score.score === scoreData.score && 
              score.game === scoreData.game && 
              Math.abs(score.timestamp - scoreData.timestamp) < 5000
            );
            
            if (!exists) {
              existingData.push(scoreData);
              localStorage.setItem(cloudKey, JSON.stringify(existingData));
              console.log('‚ö†Ô∏è Score saved to localStorage only (device sync)');
            }
          });
          
        } catch (error) {
          console.error('‚ùå Error in cloud storage sync:', error);
        }
      }
      
      // Start listening for stats updates
      listenForStatsUpdates();
      
      // Guaranteed auto-sync every 5 seconds - SIMPLE AND RELIABLE
      setInterval(() => {
        const savedUser = localStorage.getItem('gameist_user');
        if (savedUser) {
          const user = JSON.parse(savedUser);
          console.log('üîÑ Auto-sync every 5 seconds for:', user.displayName);
          loadUserStats(user.uid);
        }
      }, 5000);

      // Auto-refresh stats every 30 seconds for cross-device sync
      setInterval(() => {
        const user = firebase.auth().currentUser;
        if (user) {
          console.log('üîÑ Auto-refreshing user stats for cross-device sync...');
          loadUserStats(user.uid);
        }
      }, 30000);

      // Immediate call to check saved session and load stats
      checkSavedSession();

      // Check for redirect result (when using signInWithRedirect) - Enhanced
      firebase.auth().getRedirectResult()
        .then((result) => {
          if (result.user) {
            console.log("üîÑ Redirect result received:", result.user.displayName);
            handleAuthSuccess(result);
          } else {
            console.log("‚ÑπÔ∏è No redirect result - normal flow");
          }
        })
        .catch((error) => {
          console.error("‚ùå Redirect result error:", error);
          if (error.code !== 'auth/no-current-user') {
            handleAuthError(error);
          }
        });

      // Enhanced popup blocker detection
      document.getElementById('googleLogin').addEventListener('click', function(e) {
        e.preventDefault();
        
        const authStatus = document.getElementById('authStatus');
        authStatus.style.display = 'block';
        authStatus.innerHTML = 'üîÑ Google giri≈ü ba≈ülatƒ±lƒ±yor...';
        
        // Force user gesture for popup
        const userGesture = new Promise((resolve) => {
          setTimeout(resolve, 100);
        });
        
        userGesture.then(() => {
          // Try popup with explicit user gesture
          firebase.auth().signInWithPopup(provider)
            .then((result) => {
              console.log("‚úÖ Popup successful");
              handleAuthSuccess(result);
            })
            .catch((error) => {
              console.error("‚ùå Popup failed:", error);
              
              // Immediate redirect fallback
              if (error.code === 'auth/popup-closed-by-user' || 
                  error.code === 'auth/popup-blocked' ||
                  error.code === 'auth/cancelled-popup-request') {
                
                console.log("üîÑ Trying redirect method...");
                authStatus.innerHTML = 'üîÑ Popup engellendi, y√∂nlendiriliyor...';
                
                // Use redirect as fallback
                firebase.auth().signInWithRedirect(provider)
                  .then(() => {
                    console.log("‚úÖ Redirect initiated");
                    authStatus.innerHTML = 'üîÑ Y√∂nlendirme ba≈ülatƒ±ldƒ±...';
                  })
                  .catch((redirectError) => {
                    console.error("‚ùå Redirect failed:", redirectError);
                    handleAuthError(redirectError);
                  });
              } else {
                handleAuthError(error);
              }
            });
        });
      });

      // Leaderboard helper functions (ready for implementation)
      function saveUserScore(userId, displayName, score) {
        if (!db) {
          console.error("‚ùå Firestore not initialized");
          return;
        }
        
        return db.collection('leaderboard').add({
          userId: userId,
          displayName: displayName,
          score: score,
          timestamp: firebase.firestore.FieldValue.serverTimestamp(),
          game: 'elementist' // or other game name
        });
      }

      function getTopScores(game = 'elementist', limit = 10) {
        if (!db) {
          console.error("‚ùå Firestore not initialized");
          return Promise.resolve([]);
        }
        
        return db.collection('leaderboard')
          .where('game', '==', game)
          .orderBy('score', 'desc')
          .limit(limit)
          .get();
      }

      console.log("üî• Firebase Authentication initialized successfully");
    </script>
    
    <!-- Global Key Events Analytics -->
    <script>
      // Global Key Events Tracking System
      const globalKeyAnalytics = {
        totalKeys: 0,
        sessionStart: Date.now(),
        pagePath: window.location.pathname,
        keyFrequency: {},
        specialKeys: {
          'Enter': 0,
          'Backspace': 0,
          'Tab': 0,
          'Escape': 0,
          'ArrowUp': 0,
          'ArrowDown': 0,
          'ArrowLeft': 0,
          'ArrowRight': 0,
          'Space': 0
        },
        
        trackKey(key, target) {
          this.totalKeys++;
          
          // Track special keys
          if (this.specialKeys.hasOwnProperty(key)) {
            this.specialKeys[key]++;
          }
          
          // Track letter/number frequency
          if (key.length === 1 && key.match(/[A-Za-z0-9]/)) {
            this.keyFrequency[key] = (this.keyFrequency[key] || 0) + 1;
          }
          
          // Log every 50th key to avoid spam
          if (this.totalKeys % 50 === 0) {
            console.log(`üìä Global Key Analytics: ${this.totalKeys} keys tracked on ${this.pagePath}`);
          }
        },
        
        getStats() {
          const sessionTime = Math.floor((Date.now() - this.sessionStart) / 1000);
          return {
            pagePath: this.pagePath,
            totalKeys: this.totalKeys,
            sessionTime: sessionTime,
            keysPerMinute: Math.round((this.totalKeys / sessionTime) * 60),
            specialKeys: {...this.specialKeys},
            keyFrequency: {...this.keyFrequency}
          };
        },
        
        sendToAnalytics() {
          const stats = this.getStats();
          
          // Send to Google Analytics
          if (window.gtag) {
            gtag('event', 'global_key_stats', {
              'page_path': stats.pagePath,
              'total_keys': stats.totalKeys,
              'session_time': stats.sessionTime,
              'keys_per_minute': stats.keysPerMinute,
              'enter_count': stats.specialKeys['Enter'],
              'backspace_count': stats.specialKeys['Backspace']
            });
          }
          
          // Send to Firebase if user is logged in
          try {
            if (window.firebase && window.firebase.auth) {
              const user = firebase.auth().currentUser;
              if (user) {
                const database = firebase.database();
                database.ref(`analytics/${user.uid}/global_key_events`).push({
                  stats: stats,
                  timestamp: Date.now(),
                  userAgent: navigator.userAgent,
                  referrer: document.referrer
                });
              }
            }
          } catch (error) {
            console.log('Global analytics send error:', error);
          }
        }
      };
      
      // Track all key events on the page
      document.addEventListener('keydown', function(e) {
        // Don't track keys in password fields
        if (e.target.type === 'password' || e.target.type === 'email') return;
        
        globalKeyAnalytics.trackKey(e.key, e.target.tagName);
      });
      
      // Send analytics every 60 seconds
      setInterval(() => {
        globalKeyAnalytics.sendToAnalytics();
      }, 60000);
      
      // Send analytics on page unload
      window.addEventListener('beforeunload', () => {
        globalKeyAnalytics.sendToAnalytics();
      });
      
      // Console command to view stats
      window.getGlobalKeyStats = () => {
        console.log('üìä Global Key Event Analytics:', globalKeyAnalytics.getStats());
      };
      
      console.log('üåê Global Key Events Analytics initialized');
    </script>
    
    <!-- GA4 Game Click Tracking -->
    <script>
      // Game click tracking function
      function trackGameClick(gameName, source) {
        console.log(`üéÆ Game clicked: ${gameName} from ${source}`);
        
        // GA4 Event Tracking
        if (typeof gtag !== 'undefined') {
          const gameInfo = {
            'elementist': {
              'game_full_name': 'Elementist - Creature Battle Game',
              'game_type': 'creature_battle'
            },
            '2048': {
              'game_full_name': '2048 - Number Puzzle Game',
              'game_type': 'number_puzzle'
            },
            'wordle': {
              'game_full_name': 'Wordle - Kelime Tahmin Oyunu',
              'game_type': 'word_puzzle'
            }
          };
          
          const info = gameInfo[gameName] || {
            'game_full_name': gameName,
            'game_type': 'unknown'
          };
          
          gtag('event', `${gameName.toLowerCase()}_secildi`, {
            'game_name': gameName,
            'game_full_name': info.game_full_name,
            'game_type': info.game_type,
            'method': 'card_click',
            'source': source,
            'page_location': window.location.pathname
          });
        }
        
        // Allow the navigation to proceed
        return true;
      }
      
      // Track other important interactions
      document.addEventListener('DOMContentLoaded', function() {
        // Track login button clicks
        const loginBtn = document.getElementById('googleLogin');
        if (loginBtn) {
          loginBtn.addEventListener('click', function() {
            if (typeof gtag !== 'undefined') {
              gtag('event', 'ana_sayfa_giris_denemesi', {
                'method': 'google_login',
                'source': 'main_page',
                'page_type': 'main_hub'
              });
            }
          });
        }
        
        // Track theme toggle
        const themeToggle = document.getElementById('themeToggle');
        if (themeToggle) {
          themeToggle.addEventListener('click', function() {
            if (typeof gtag !== 'undefined') {
              gtag('event', 'ana_sayfa_tema_degistirildi', {
                'method': 'button_click',
                'source': 'main_page',
                'page_type': 'main_hub'
              });
            }
          });
        }
        
        // Track language toggle
        const langToggle = document.getElementById('languageToggle');
        if (langToggle) {
          langToggle.addEventListener('click', function() {
            if (typeof gtag !== 'undefined') {
              gtag('event', 'ana_sayfa_dil_degistirildi', {
                'method': 'button_click',
                'source': 'main_page',
                'page_type': 'main_hub'
              });
            }
          });
        }
        
        // Track search functionality
        const searchInput = document.getElementById('searchInput');
        if (searchInput) {
          searchInput.addEventListener('input', function() {
            if (this.value.length > 2) {
              if (typeof gtag !== 'undefined') {
                gtag('event', 'ana_sayfa_arama_yapildi', {
                  'method': 'search_input',
                  'source': 'main_page',
                  'page_type': 'main_hub',
                  'search_term_length': this.value.length
                });
              }
            }
          });
        }
        
        // Track category filters
        const categoryButtons = document.querySelectorAll('.category-btn');
        categoryButtons.forEach(btn => {
          btn.addEventListener('click', function() {
            const category = this.getAttribute('data-category') || 'unknown';
            if (typeof gtag !== 'undefined') {
              gtag('event', 'ana_sayfa_kategori_filtrelendi', {
                'method': 'category_click',
                'source': 'main_page',
                'page_type': 'main_hub',
                'category': category
              });
            }
          });
        });
        
        // Track scroll depth
        let maxScrollDepth = 0;
        function trackScrollDepth() {
          const scrollPercent = Math.round((window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100);
          if (scrollPercent > maxScrollDepth) {
            maxScrollDepth = scrollPercent;
            
            // Track milestones: 25%, 50%, 75%, 90%
            if ([25, 50, 75, 90].includes(scrollPercent)) {
              if (typeof gtag !== 'undefined') {
                gtag('event', 'ana_sayfa_scroll_derinligi', {
                  'method': 'page_scroll',
                  'source': 'main_page',
                  'page_type': 'main_hub',
                  'scroll_depth': scrollPercent
                });
              }
            }
          }
        }
        
        window.addEventListener('scroll', trackScrollDepth);
        
        // Track page load time
        window.addEventListener('load', function() {
          const loadTime = performance.now();
          if (typeof gtag !== 'undefined') {
            gtag('event', 'ana_sayfa_yukleme_suresi', {
              'method': 'page_load',
              'source': 'main_page',
              'page_type': 'main_hub',
              'load_time_ms': Math.round(loadTime)
            });
          }
        });
        
        // Track user session duration
        let sessionStartTime = Date.now();
        
        function trackSessionDuration() {
          const duration = Math.floor((Date.now() - sessionStartTime) / 1000);
          if (typeof gtag !== 'undefined') {
            gtag('event', 'ana_sayfa_oturum_suresi', {
              'method': 'session_end',
              'source': 'main_page',
              'page_type': 'main_hub',
              'duration_seconds': duration
            });
          }
        }
        
        window.addEventListener('beforeunload', trackSessionDuration);
      });
      
      console.log('üéÆ GA4 Game Click Tracking initialized');
    </script>
  </body>
</html>
