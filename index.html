<!DOCTYPE html>
<html lang="tr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gameist | Elementist, 2048, Wordlist, Bilardist - √úcretsiz Online Oyun Hub'ƒ±</title>
    <meta
      name="description"
      content="Gameist: Elementist, 2048, Wordlist ve Bilardist gibi oyunlarƒ± tek yerde toplayan premium oyun hub'ƒ±. Hemen oyna!"
    />
    <meta name="robots" content="index,follow" />
    <link rel="canonical" href="./index.html" />
    <meta property="og:site_name" content="Gameist" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Gameist - Premium Oyun Deneyimi" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-57L2NFVJYL"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'G-57L2NFVJYL');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9478711342689131"
         crossorigin="anonymous"></script>
    <meta
      property="og:description"
      content="Elementist, 2048, Wordlist ve Bilardist: hepsi Gameist ana men√ºs√ºnde."
    />
    <meta property="og:url" content="./index.html" />
    <meta property="og:image" content="./2048/logo.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Gameist - Premium Oyun Deneyimi" />
    <meta
      name="twitter:description"
      content="Elementist, 2048, Wordlist ve Bilardist oyunlarƒ±na tek yerden ula≈ü."
    />
    <meta name="twitter:image" content="./2048/logo.png" />
    <link rel="icon" href="ico.png" type="image/png" />
    <link rel="icon" href="ico.png" sizes="32x32" type="image/png" />
    <link rel="icon" href="ico.png" sizes="16x16" type="image/png" />
    <link rel="apple-touch-icon" href="ico.png" />
    <link rel="shortcut icon" href="ico.png" type="image/png" />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Gameist",
        "url": "https://gameist.fun/",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://gameist.fun/?q={search_term_string}",
          "query-input": "required name=search_term_string"
        }
      }
    </script>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "ItemList",
        "name": "Gameist Games",
        "itemListElement": [
          {
            "@type": "ListItem",
            "position": 1,
            "name": "Elementist",
            "url": "https://gameist.fun/Elementist/glowlings.html"
          },
          {
            "@type": "ListItem",
            "position": 2,
            "name": "2048",
            "url": "https://gameist.fun/2048/index.html"
          },
          {
            "@type": "ListItem",
            "position": 3,
            "name": "Wordlist",
            "url": "https://gameist.fun/wordle/index.html"
          },
          {
            "@type": "ListItem",
            "position": 4,
            "name": "Bilardist",
            "url": "https://gameist.fun/bilardo/index.html"
          }
        ]
      }
    </script>
    <link rel="stylesheet" href="giris_stili.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript>
      <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap"
        rel="stylesheet"
      />
    </noscript>
    <link
      rel="preload"
      as="style"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript>
      <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      />
    </noscript>
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Gameist",
        "url": "./index.html",
        "inLanguage": "tr",
        "description": "Oyunlarƒ± tek hub i√ßinde toplayan Gameist ana men√ºs√º.",
        "hasPart": [
          {
            "@type": "WebPage",
            "name": "Elementist",
            "url": "./Elementist/glowlings.html"
          },
          {
            "@type": "WebPage",
            "name": "2048",
            "url": "./2048/index.html"
          },
          {
            "@type": "WebPage",
            "name": "Wordlist",
            "url": "./wordle/index.html"
          },
          {
            "@type": "WebPage",
            "name": "Bilardist",
            "url": "./bilardo/index.html"
          }
        ]
      }
    </script>
    <script src="https://pl28580836.effectivegatecpm.com/02/74/05/0274056288dd0d4327742db82768e3ed.js"></script>
  </head>
  <body>
    <!-- Animated Background -->
    <div class="animated-bg">
      <div class="floating-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
        <div class="shape shape-4"></div>
        <div class="shape shape-5"></div>
      </div>
    </div>

    <!-- Rick & Morty Easter Egg -->
    <!-- <div class="rick-morty-container">
      <div class="rick-wrapper">
        <img src="rick.gif" alt="Rick" class="rick-gif" id="rickGif" />
        <div class="speech-bubble" id="speechBubble">
          <span>Doƒüru yerdesin Morty!</span>
        </div>
        <audio id="rickAudio" src="ricklaugh.mp3"></audio>
      </div>
    </div> -->

    <!-- Main Container -->
    <div class="main-container">
      <!-- Header Section -->
      <header class="hero-section">
        <div class="hero-content">
          <div class="lang-switch" aria-label="Language selector">
            <label class="lang-switch-label" for="gameistLangSelect" data-i18n="lang_label">Language</label>
            <select id="gameistLangSelect" class="lang-switch-select">
              <option value="tr">TR</option>
              <option value="en">EN</option>
            </select>
          </div>
          <div class="logo-container">
            <div class="logo-icon">
              <i class="fas fa-gamepad"></i>
            </div>
            <h1 class="brand-title">
              <span class="brand-main">Gameist</span>
              <span class="brand-sub" data-i18n="brand_sub">Premium Gaming Hub</span>
            </h1>
          </div>

          <!-- Firebase Authentication -->
          <div class="auth-section" style="margin-top: 20px; text-align: center;">
            <button id="googleLogin" class="google-login-btn" style="padding: 10px 20px; background: #4285f4; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 500; display: inline-flex; align-items: center; gap: 8px; transition: all 0.3s ease;">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
              </svg>
              Google ile Giri≈ü Yap
            </button>
            <div id="userInfo" style="display: none; margin-top: 20px;">
              <div style="padding: 20px; background: linear-gradient(145deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0.05) 100%); border-radius: 16px; backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.3); box-shadow: 0 20px 40px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.2); transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); position: relative; overflow: hidden;">
                <!-- Animated background gradient -->
                <div style="position: absolute; top: -50%; left: -50%; width: 200%; height: 200%; background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent); animation: shimmer 3s infinite;"></div>
                
                <!-- User Profile Section -->
                <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 16px; position: relative; z-index: 1;">
                  <div style="position: relative;">
                    <img id="userPhoto" src="" alt="User" style="width: 48px; height: 48px; border-radius: 50%; object-fit: cover; border: 3px solid rgba(255,255,255,0.4); box-shadow: 0 8px 24px rgba(0,0,0,0.2), 0 0 0 1px rgba(255,255,255,0.1);">
                    <div style="position: absolute; bottom: 0px; right: 0px; width: 16px; height: 16px; background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%); border: 3px solid rgba(255,255,255,0.9); border-radius: 50%; box-shadow: 0 2px 8px rgba(34,197,94,0.4);"></div>
                    <div style="position: absolute; top: -2px; right: -2px; background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); color: white; border-radius: 50%; width: 16px; height: 16px; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold; border: 2px solid rgba(255,255,255,0.9);">‚ú®</div>
                  </div>
                  <div style="text-align: left; flex: 1;">
                    <div style="color: rgba(255,255,255,0.9); font-weight: 600; font-size: 11px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 2px;" data-i18n="welcome_text">Welcome</div>
                    <div id="userName" style="color: white; font-weight: 700; font-size: 20px; text-shadow: 0 2px 8px rgba(0,0,0,0.3); margin-bottom: 2px; line-height: 1.2;"></div>
                    <div id="userEmail" style="color: rgba(255,255,255,0.8); font-size: 13px; font-weight: 500; display: flex; align-items: center; gap: 4px;">
                      <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor" style="opacity: 0.7;">
                        <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                      </svg>
                      <span id="userEmailText" style="max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"></span>
                    </div>
                  </div>
                </div>
                
                <!-- Stats Section -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 16px; position: relative; z-index: 1;">
                  <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px; text-align: center; border: 1px solid rgba(255,255,255,0.2);">
                    <div style="color: #fbbf24; font-size: 18px; font-weight: 700; margin-bottom: 2px;">üèÜ</div>
                    <div style="color: rgba(255,255,255,0.8); font-size: 11px; font-weight: 600;" data-i18n="total_score">Total Score</div>
                    <div id="userTotalScore" style="color: white; font-size: 16px; font-weight: 700;">0</div>
                  </div>
                  <div style="background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px; text-align: center; border: 1px solid rgba(255,255,255,0.2);">
                    <div style="color: #60a5fa; font-size: 18px; font-weight: 700; margin-bottom: 2px;">üéÆ</div>
                    <div style="color: rgba(255,255,255,0.8); font-size: 11px; font-weight: 600;" data-i18n="games_played">Games Played</div>
                    <div id="userGamesPlayed" style="color: white; font-size: 16px; font-weight: 700;">0</div>
                  </div>
                </div>
                
                <!-- Action Buttons -->
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; gap: 6px; position: relative; z-index: 1;">
                  <button id="profileBtn" style="padding: 8px; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 11px; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(59,130,246,0.3); display: flex; align-items: center; justify-content: center; gap: 3px;">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                    </svg>
                    <span data-i18n="profile_button">Profile</span>
                  </button>
                  <button id="leaderboardBtn" style="padding: 8px; background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 11px; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(139,92,246,0.3); display: flex; align-items: center; justify-content: center; gap: 3px;">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M7.5 21L2 16l2.5-2.5L7.5 16l6-6L16 12l-8.5 9zM22.5 6L12 16.5l-3-3L18 4.5l4.5 1.5z"/>
                    </svg>
                    <span data-i18n="leaderboard_button">Leaderboard</span>
                  </button>
                  <button id="refreshStatsBtn" style="padding: 8px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 11px; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(16,185,129,0.3); display: flex; align-items: center; justify-content: center; gap: 3px;">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                    </svg>
                    <span>Refresh</span>
                  </button>
                  <button id="logout" style="padding: 8px; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 11px; font-weight: 600; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(239,68,68,0.3); display: flex; align-items: center; justify-content: center; gap: 3px;">
                    <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                    </svg>
                    <span data-i18n="logout_button">Logout</span>
                  </button>
                </div>
              </div>
            </div>
            
            <!-- Add shimmer animation -->
            <style>
            @keyframes shimmer {
              0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
              100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
            }
            </style>
            <div id="authStatus" style="margin-top: 8px; font-size: 12px; color: rgba(255,255,255,0.7); display: none;"></div>
          </div>
        </div>
      </header>

      <!-- Games Section -->
      <section class="games-section">
        <div class="section-header">
          <h3 class="section-title">
            <i class="fas fa-fire"></i>
            <span data-i18n="section_popular_games">Pop√ºler Oyunlar</span>
          </h3>
          <p class="section-subtitle" data-i18n="section_popular_subtitle">
            Hemen oynamaya ba≈üla ve eƒülenceyi ke≈üfet!
          </p>
        </div>

        <div class="games-grid">
           <a href="Elementist/glowlings.html"  class="game-card featured">
            <div class="card-header">
            
              <div class="game-badge">
                <i class="fas fa-crown"></i>
                <span data-i18n="badge_popular">Pop√ºler</span>
              </div>
              <div class="card-actions">
                <button class="action-btn favorite">
                  <i class="far fa-heart"></i>
                </button>
                <button class="action-btn share">
                  <i class="fas fa-share"></i>
                </button>
              </div>
            </div>

            <div class="card-image">
              <img src="Elementist/elementistlogo.png" alt="Elementist - Roguelite" loading="lazy" decoding="async" />
              <div class="play-overlay">
                <div class="play-button">
                  <i class="fas fa-play"></i>
                </div>
              </div>
            </div>
   <!-- Batak Game Card -->
            <div class="card-content">
              <div class="game-title">
                <h4 data-i18n="game_elementist_title">Elementist</h4>
                <span class="game-icon">üÉè</span>
              </div>
              <p class="game-description" data-i18n="game_elementist_desc">
              Elementlerin g√ºc√ºn√º ke≈üfet, d√º≈ümanlarƒ± alt et ve hayatta kalabileceƒüin en zorlu arenada sava≈ü!
              </p>
              <div class="game-features">
                <span class="feature-tag">
                  <i class="fas fa-lightbulb"></i>
                <span data-i18n="tag_roguelite">Roguelite</span>
                </span>
                <span class="feature-tag">
                  <i class="fas fa-language"></i>
                  TR / EN / DE / ES / PT-BR / JA / HI / ZH
                </span>
              </div>
              <div class="card-footer">
               <div class="rating">
                  <div class="stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                  </div>
                  <span class="rating-text">5.0</span>
                </div>
                <div class="play-count">
                  <i class="fas fa-users"></i>
                  <span>1.2K+ oyuncu</span>
                </div>
              </div>
            </div>
          </a>
          <!-- Bilardo Game Card -->
          <a href="2048/index.html" class="game-card">
            <div class="card-header">
              <div class="game-badge tas">
                <i class="fas fa-brain"></i>
                <span data-i18n="badge_classic">Klasik</span>
              </div>
              <div class="card-actions">
                <button class="action-btn favorite">
                  <i class="far fa-heart"></i>
                </button>
                <button class="action-btn share">
                  <i class="fas fa-share"></i>
                </button>
              </div>
            </div>

            <div class="card-image">
              <img
                src="2048/logo.png"
                alt="2048 - Sayƒ±larƒ± Birle≈ütir"
                loading="lazy"
                decoding="async"
              />
              <div class="play-overlay">
                <div class="play-button">
                  <i class="fas fa-play"></i>
                </div>
              </div>
            </div>

            <div class="card-content">
              <div class="game-title">
                <h4 data-i18n="game_2048_title">2048</h4>
                <span class="game-icon">üî¢</span>
              </div>
              <p class="game-description" data-i18n="game_2048_desc">
              Sayƒ±larƒ± birle≈ütir, stratejini kur ve 2048'e ula≈ü!
              </p>
              <div class="game-features">
                <span class="feature-tag">
                  <i class="fas fa-lightbulb"></i>
                 <span data-i18n="tag_strategy">Strateji</span>
                </span>
                <span class="feature-tag">
                  <i class="fas fa-language"></i>
                  TR / EN / DE
                </span>
              </div>
              <div class="card-footer">
                <div class="rating">
                  <div class="stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                  </div>
                  <span class="rating-text">5.0</span>
                </div>
                <div class="play-count">
                  <i class="fas fa-users"></i>
                  <span>5K+ oyuncu</span>
                </div>
              </div>
            </div>
          </a>

          <!-- Wordle Game Card -->
          <a href="wordle/index.html" class="game-card">
            <div class="card-header">
              <div class="game-badge brain">
                <i class="fas fa-brain"></i>
                <span data-i18n="badge_brain">Zeka</span>
              </div>
              <div class="card-actions">
                <button class="action-btn favorite">
                  <i class="far fa-heart"></i>
                </button>
                <button class="action-btn share">
                  <i class="fas fa-share"></i>
                </button>
              </div>
            </div>

            <div class="card-image">
              <img src="wordle/wordlist.png" alt="Wordlist - Kelime Oyunu" loading="lazy" decoding="async" />
              <div class="play-overlay">
                <div class="play-button">
                  <i class="fas fa-play"></i>
                </div>
              </div>
            </div>

            <div class="card-content">
              <div class="game-title">
                <h4 data-i18n="game_wordlist_title">Wordlist</h4>
                <span class="game-icon">üß†</span>
              </div>
              <p class="game-description" data-i18n="game_wordlist_desc">
                Kelime ustasƒ± ol! Harfleri birle≈ütir, gizli kelimeleri bul.
                Beyin geli≈üimi ve jimnastiƒüi i√ßin m√ºkemmel bir deneyim.
              </p>
              <div class="game-features">
                <span class="feature-tag">
                  <i class="fas fa-lightbulb"></i>
                  <span data-i18n="tag_brain_training">Zeka Geli≈ütirici</span>
                </span>
                <span class="feature-tag">
                  <i class="fas fa-language"></i>
                  TR / EN
                </span>
              </div>
              <div class="card-footer">
                <div class="rating">
                  <div class="stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                  </div>
                  <span class="rating-text">4.9</span>
                </div>
                <div class="play-count">
                  <i class="fas fa-users"></i>
                  <span>850+ oyuncu</span>
                </div>
              </div>
            </div>
          </a>
          <!-- Wordle Game Card -->
         
          <!-- Okey Game Card -->
          <a href="bilardo/index.html" class="game-card">
            <div class="card-header">
              <div class="game-badge card">
                <i class="fas fa-brain"></i>
                <span data-i18n="badge_pool">Rick'in uƒürak alanƒ±</span>
              </div>
              <div class="card-actions">
                <button class="action-btn favorite">
                  <i class="far fa-heart"></i>
                </button>
                <button class="action-btn share">
                  <i class="fas fa-share"></i>
                </button>
              </div>
            </div>

            <div class="card-image">
              <img
                src="bilardo/img/bilardist.png"
                alt="Bilardist - Premium Bilardo Oyunu"
                loading="lazy"
                decoding="async"
              />
              <div class="play-overlay">
                <div class="play-button">
                  <i class="fas fa-play"></i>
                </div>
              </div>
            </div>

            <div class="card-content">
              <div class="game-title">
                <h4 data-i18n="game_bilardist_title">Bilardist</h4>
                <span class="game-icon">üé±</span>
              </div>
              <p class="game-description" data-i18n="game_bilardist_desc">
                Uzaydan gelen premium bilardo deneyimi. Ger√ßek√ßi fizik motoru ve
                muhte≈üem grafiklerle bilardo oynamanƒ±n keyfini √ßƒ±kar!
              </p>
              <div class="game-features">
                <span class="feature-tag">
                  <i class="fas fa-magic"></i>
                  <span data-i18n="tag_realistic_physics">Ger√ßek√ßi Fizik</span>
                </span>
                <span class="feature-tag">
                  <i class="fas fa-language"></i>
                  TR / EN
                </span>
              </div>
              <div class="card-footer">
                <div class="rating">
                  <div class="stars">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                  </div>
                  <span class="rating-text">4.9</span>
                </div>
                <div class="play-count">
                  <i class="fas fa-users"></i>
                  <span>900+ oyuncu</span>
                </div>
              </div>
            </div>
          </a>
          
        </div>
      </section>

      <!-- Call to Action -->
      <section class="cta-section">
        <div class="cta-content">
          <h3 class="cta-title" data-i18n="cta_title">Bizi takip et!</h3>
          <p class="cta-description" data-i18n="cta_description">
            Yeni oyunlar ve √∂zellikler √ºzerinde √ßalƒ±≈üƒ±yoruz. G√ºncellemeler i√ßin
            takipte kalƒ±n!
          </p>
        <div class="social-icons">
            <a
              href="https://www.instagram.com/batuhanberk.space/"
              target="_blank"
              rel="noopener noreferrer"
              class="social-link instagram"
            ><i class="fab fa-instagram" style="color:#E1306C;"></i></a>
            <a
              href="https://discord.gg/EnzpuEYXFb"
              target="_blank"
              rel="noopener noreferrer"
              class="social-link discord"
            >
              <i class="fab fa-discord"></i>
            </a>
          </div>
          <div style="margin-top:12px; display:flex; flex-direction:column; gap:6px; align-items:center; text-align:center;">
            <div style="display:inline-block; padding:6px 10px; background:rgba(0,0,0,0.22); border:1px solid rgba(255,255,255,0.10); border-radius:12px; backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); font-size:12px; font-weight:500; opacity:0.92;">
              <span data-i18n="footer_copyright">¬© 2026 Gameist by Batuhan Berk ‚Äì Antalya</span>
            </div>
            <div style="display:inline-block; padding:6px 10px; background:rgba(0,0,0,0.18); border:1px solid rgba(255,255,255,0.08); border-radius:12px; backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); font-size:12px; font-weight:500; opacity:0.90;">
              <span data-i18n="footer_contact">ƒ∞leti≈üim: DM @batuhanberk.space | batuhanberk.space</span>
            </div>
          </div>
          </div>
        </div>
      </section>
    </div>

    <!-- Coming Soon Modal -->
    <!-- <div class="modal-overlay" id="comingSoonModal">
      <div class="modal-content">
        <div class="modal-header">
          <h4>üöÄ Yakƒ±nda Geliyor!</h4>
          <button class="modal-close" onclick="hideComingSoon()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="modal-body">
          <p>
           
          </p>
          <div class="upcoming-features">
            <div class="feature-item">
              <i class="fas fa-chess"></i>
              <span>Satran√ß Oyunu</span>
            </div>
            <div class="feature-item">
              <i class="fas fa-puzzle-piece"></i>
              <span>Puzzle Oyunlarƒ±</span>
            </div>
            <div class="feature-item">
              <i class="fas fa-trophy"></i>
              <span>Liderlik Tablosu</span>
            </div>
          </div>
        </div>
      </div>
    </div> -->

    <footer style="position:fixed; left:0; right:0; bottom:10px; text-align:center; font-size:12px; font-weight:500; opacity:0.85; z-index:9999; pointer-events:none;">
      <span style="display:inline-block; padding:5px 9px; background:rgba(0,0,0,0.25); border:1px solid rgba(255,255,255,0.10); border-radius:999px; pointer-events:none;">
        <span style="pointer-events:none;">Made by </span>
        <a href="https://batuhanberk.space" target="_blank" rel="noopener noreferrer" style="color:inherit; text-decoration:underline; pointer-events:auto;">BatuhanBerk</a>
      </span>
    </footer>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="main.js?v=3"></script>
    <script src="score-sync.js?v=1"></script>
    <script src="hub-i18n.js?v=3"></script>
    <script src="auth-i18n.js?v=3"></script>
    
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9478711342689131"
         crossorigin="anonymous"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyD7ckcqdZWfnUx5r8uKmvu9Ikax1x5Qidk",
        authDomain: "gameist.firebaseapp.com",
        projectId: "gameist",
        storageBucket: "gameist.firebasestorage.app",
        messagingSenderId: "525659299937",
        appId: "1:525659299937:web:1c8343a25be2a994bcca20",
        measurementId: "G-WE9R0GWKM6",
        databaseURL: "https://gameist-default-rtdb.firebaseio.com/"
      };
      firebase.initializeApp(firebaseConfig);

      // Firebase Authentication Logic
      const provider = new firebase.auth.GoogleAuthProvider();
      provider.addScope('email');
      provider.addScope('profile');
      
      // Custom redirect URI for better compatibility
      provider.setCustomParameters({
        'redirect_uri': window.location.origin
      });

      // Initialize Firestore for leaderboard
      let db;
      try {
        db = firebase.firestore();
        console.log("‚úÖ Firestore initialized - leaderboard ready");
      } catch (error) {
        console.error("‚ùå Firestore initialization failed:", error);
      }

      // Make db accessible globally for stats functions
      window.gameistDB = db;

      // Logout button event listener
      document.getElementById('logout').addEventListener('click', async () => {
        try {
          await firebase.auth().signOut();
          document.getElementById('googleLogin').style.display = 'inline-flex';
          document.getElementById('userInfo').style.display = 'none';
          console.log("‚úÖ User signed out successfully");
        } catch (error) {
          console.error("‚ùå Sign out error:", error);
          const authStatus = document.getElementById('authStatus');
          authStatus.style.display = 'block';
          authStatus.innerHTML = '‚ùå √áƒ±kƒ±≈ü hatasƒ±: ' + error.message;
        }
      });

      // Handle successful authentication
      function handleAuthSuccess(result) {
        const user = result.user;
        const credential = result.credential;
        const token = credential ? credential.accessToken : 'N/A';
        
        // Update UI with user info
        document.getElementById('userName').textContent = user.displayName;
        document.getElementById('userEmailText').textContent = user.email;
        document.getElementById('userPhoto').src = user.photoURL;
        document.getElementById('googleLogin').style.display = 'none';
        document.getElementById('userInfo').style.display = 'block';
        
        // Update status with translation
        const authStatus = document.getElementById('authStatus');
        authStatus.style.display = 'block';
        authStatus.innerHTML = '‚úÖ ' + getAuthTranslation('login_success');
        
        console.log("‚úÖ Authentication successful:", {
          displayName: user.displayName,
          email: user.email,
          uid: user.uid,
          token: token.substring(0, 20) + '...'
        });
        
        // Save user session for cross-page access
        localStorage.setItem('gameist_user', JSON.stringify({
          displayName: user.displayName,
          email: user.email,
          photoURL: user.photoURL,
          uid: user.uid
        }));
        
        // Load and update user stats immediately after login
        loadUserStats(user.uid);
        
        // Leaderboard functionality ready
        if (db) {
          console.log("‚úÖ Leaderboard ready - scores can be saved");
          
          // Example: Save user score (uncomment when needed)
          // saveUserScore(user.uid, user.displayName, 0);
        }
        
        // Hide status after 3 seconds
        setTimeout(() => {
          authStatus.style.display = 'none';
        }, 3000);
      }

      // Handle authentication errors with translations
      function handleAuthError(error) {
        console.error("‚ùå Authentication error:", error);
        
        const authStatus = document.getElementById('authStatus');
        authStatus.style.display = 'block';
        
        let errorMessage;
        
        // Use translated error messages
        switch (error.code) {
          case 'auth/popup-closed-by-user':
            errorMessage = getAuthTranslation('popup_closed');
            break;
          case 'auth/popup-blocked':
            errorMessage = getAuthTranslation('popup_blocked');
            break;
          case 'auth/cancelled-popup-request':
            errorMessage = getAuthTranslation('popup_closed');
            break;
          case 'auth/unauthorized-domain':
            errorMessage = getAuthTranslation('unauthorized_domain');
            break;
          default:
            errorMessage = getAuthTranslation('login_failed') + ': ' + error.message;
        }
        
        authStatus.innerHTML = '‚ùå ' + errorMessage;
        
        // Hide status after 5 seconds
        setTimeout(() => {
          authStatus.style.display = 'none';
        }, 5000);
      }

      // Listen for authentication state changes
      firebase.auth().onAuthStateChanged((user) => {
        if (user) {
          // User is signed in - update UI
          document.getElementById('userName').textContent = user.displayName;
          document.getElementById('userEmailText').textContent = user.email;
          document.getElementById('userPhoto').src = user.photoURL;
          document.getElementById('googleLogin').style.display = 'none';
          document.getElementById('userInfo').style.display = 'block';
          
          // Save session for cross-page access
          localStorage.setItem('gameist_user', JSON.stringify({
            displayName: user.displayName,
            email: user.email,
            photoURL: user.photoURL,
            uid: user.uid
          }));
          
          console.log("‚úÖ User session active:", user.displayName);
        } else {
          // User is signed out - clear session
          document.getElementById('googleLogin').style.display = 'inline-flex';
          document.getElementById('userInfo').style.display = 'none';
          localStorage.removeItem('gameist_user');
          console.log("‚ÑπÔ∏è No active user session");
        }
      });

      // Check for saved session on page load
      function checkSavedSession() {
        const savedUser = localStorage.getItem('gameist_user');
        if (savedUser) {
          try {
            const user = JSON.parse(savedUser);
            console.log("üîÑ Restoring saved session:", user.displayName);
            
            // Update UI with saved data
            document.getElementById('userName').textContent = user.displayName;
            document.getElementById('userEmailText').textContent = user.email;
            document.getElementById('userPhoto').src = user.photoURL;
            document.getElementById('googleLogin').style.display = 'none';
            document.getElementById('userInfo').style.display = 'block';
            
            // Load user stats when session is restored
            if (user.uid) {
              loadUserStats(user.uid);
            }
          } catch (e) {
            console.error("‚ùå Failed to restore session:", e);
            localStorage.removeItem('gameist_user');
          }
        }
      }

      // Profile button handler
      document.getElementById('profileBtn').addEventListener('click', function() {
        const user = JSON.parse(localStorage.getItem('gameist_user') || '{}');
        showProfileModal(user);
      });

      // Leaderboard button handler
      document.getElementById('leaderboardBtn').addEventListener('click', function() {
        showLeaderboardModal();
      });

      // Refresh stats button handler
      document.getElementById('refreshStatsBtn').addEventListener('click', function() {
        const savedUser = localStorage.getItem('gameist_user');
        if (savedUser) {
          const user = JSON.parse(savedUser);
          console.log('üîÑ Manual refresh triggered for user:', user.displayName);
          loadUserStats(user.uid);
        } else {
          console.log('‚ùå No saved user found for refresh');
        }
      });

      // Global score synchronization system
      window.gameistScoreSync = {
        lastUpdate: 0,
        isListening: false,
        
        // Initialize real-time listeners
        init() {
          if (this.isListening) return;
          this.isListening = true;
          
          console.log('üîÑ Initializing score synchronization...');
          
          // Listen for storage events (cross-tab sync)
          window.addEventListener('storage', (e) => {
            if (e.key === 'gameist_score_update') {
              console.log('üì° Storage event detected - refreshing scores');
              this.triggerRefresh();
            }
          });
          
          // Listen for visibility changes (tab switch)
          document.addEventListener('visibilitychange', () => {
            if (!document.hidden) {
              console.log('üëÅÔ∏è Tab became visible - checking for score updates');
              this.checkForUpdates();
            }
          });
          
          // Listen for window focus
          window.addEventListener('focus', () => {
            console.log('üéØ Window focused - checking for score updates');
            this.checkForUpdates();
          });
          
          // Set up periodic sync
          setInterval(() => {
            this.checkForUpdates();
          }, 30000); // Check every 30 seconds
        },
        
        // Trigger score refresh across all tabs
        triggerRefresh() {
          const savedUser = localStorage.getItem('gameist_user');
          if (savedUser) {
            const user = JSON.parse(savedUser);
            console.log('üîÑ Auto-refreshing scores for:', user.displayName);
            loadUserStats(user.uid);
            
            // Notify other tabs
            localStorage.setItem('gameist_score_update', Date.now().toString());
            
            // Update last update time
            this.lastUpdate = Date.now();
          }
        },
        
        // Check if updates are needed
        checkForUpdates() {
          const savedUser = localStorage.getItem('gameist_user');
          if (!savedUser) return;
          
          const user = JSON.parse(savedUser);
          const timeSinceLastUpdate = Date.now() - this.lastUpdate;
          
          // Auto-refresh if it's been more than 10 seconds
          if (timeSinceLastUpdate > 10000) {
            this.triggerRefresh();
          }
        },
        
        // Manual refresh from game pages
        notifyScoreUpdate(gameName, score) {
          console.log(`üéÆ Score update notification: ${gameName} - ${score}`);
          this.triggerRefresh();
        }
      };

      // Enhanced saveScore function with real-time sync
      window.saveUserScoreMain = async function(userId, displayName, score, gameName) {
        console.log('üíæ saveUserScore called:', { userId, displayName, score, gameName });
        
        try {
          const database = window.gameistDB || db;
          if (!database) {
            console.error('‚ùå Database not available');
            return false;
          }
          
          // Save to Firestore
          const docData = {
            userId: userId,
            displayName: displayName,
            score: score,
            game: gameName,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
          };
          
          console.log('üìÑ Saving to Firestore:', docData);
          
          const result = await database.collection('leaderboard').add(docData);
          console.log('‚úÖ Score saved to Firestore:', result.id);
          
          // Save to Realtime Database for cross-device sync
          try {
            const realtimeDb = firebase.database();
            const scoreRef = realtimeDb.ref(`userScores/${userId}/${result.id}`);
            await scoreRef.set({
              ...docData,
              timestamp: Date.now(),
              firestoreId: result.id
            });
            console.log('‚úÖ Score synced to Realtime Database');
          } catch (rtError) {
            console.log('‚ÑπÔ∏è Realtime Database sync failed:', rtError.message);
          }
          
          // Save to localStorage fallback
          const localScores = JSON.parse(localStorage.getItem('gameist_local_scores') || '[]');
          localScores.push({
            ...docData,
            timestamp: Date.now(),
            id: result.id
          });
          localStorage.setItem('gameist_local_scores', JSON.stringify(localScores));
          console.log('‚úÖ Score saved to localStorage fallback');
          
          // Trigger synchronization
          if (window.gameistScoreSync) {
            window.gameistScoreSync.notifyScoreUpdate(gameName, score);
          }
          
          return result;
          
        } catch (error) {
          console.error('‚ùå Failed to save score:', error);
          return false;
        }
      };

      // Initialize score sync system
      document.addEventListener('DOMContentLoaded', function() {
        setTimeout(() => {
          if (window.gameistScoreSync) {
            window.gameistScoreSync.init();
          }
        }, 1000);
      });

      // Manual test button for debugging
      setTimeout(() => {
        const savedUser = localStorage.getItem('gameist_user');
        if (savedUser) {
          const user = JSON.parse(savedUser);
          console.log('üß™ Auto-test loadUserStats for user:', user.displayName);
          loadUserStats(user.uid);
        }
      }, 2000);

      // Show profile modal
      function showProfileModal(user) {
        const modal = document.createElement('div');
        modal.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0,0,0,0.8);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          backdrop-filter: blur(5px);
        `;
        
        modal.innerHTML = `
          <div style="background: linear-gradient(145deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0.05) 100%); padding: 30px; border-radius: 20px; backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.3); box-shadow: 0 20px 40px rgba(0,0,0,0.3); max-width: 400px; width: 90%; position: relative;">
            <button onclick="this.closest('div').parentElement.remove()" style="position: absolute; top: 15px; right: 15px; background: rgba(255,255,255,0.2); border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer; color: white; font-size: 16px; display: flex; align-items: center; justify-content: center;">√ó</button>
            
            <div style="text-align: center; margin-bottom: 20px;">
              <img src="${user.photoURL || 'https://via.placeholder.com/80'}" style="width: 80px; height: 80px; border-radius: 50%; border: 3px solid rgba(255,255,255,0.4); margin-bottom: 15px; box-shadow: 0 8px 24px rgba(0,0,0,0.2);">
              <h2 style="color: white; margin: 0; font-size: 24px; font-weight: 700;">${user.displayName}</h2>
              <p style="color: rgba(255,255,255,0.8); margin: 5px 0; font-size: 14px;">${user.email}</p>
              <p style="color: rgba(255,255,255,0.6); margin: 0; font-size: 12px;">ID: ${user.uid}</p>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
              <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center;">
                <div style="color: #fbbf24; font-size: 24px; font-weight: 700;">üèÜ</div>
                <div style="color: rgba(255,255,255,0.8); font-size: 12px; margin-bottom: 5px;">${getAuthTranslation('total_score')}</div>
                <div id="modalTotalScore" style="color: white; font-size: 20px; font-weight: 700;">0</div>
              </div>
              <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; text-align: center;">
                <div style="color: #60a5fa; font-size: 24px; font-weight: 700;">üéÆ</div>
                <div style="color: rgba(255,255,255,0.8); font-size: 12px; margin-bottom: 5px;">${getAuthTranslation('games_played')}</div>
                <div id="modalGamesPlayed" style="color: white; font-size: 20px; font-weight: 700;">0</div>
              </div>
            </div>
            
            <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
              <h3 style="color: white; margin: 0 0 10px 0; font-size: 16px;">üéØ Game Stats</h3>
              <div id="gameStats" style="color: rgba(255,255,255,0.8); font-size: 14px; line-height: 1.6;">
                Loading game statistics...
              </div>
            </div>
            
            <button onclick="this.closest('div').parentElement.remove()" style="width: 100%; padding: 12px; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: 600;">
              Close
            </button>
          </div>
        `;
        
        document.body.appendChild(modal);
        loadUserStats(user.uid);
      }

      // Show leaderboard modal
      function showLeaderboardModal() {
        const modal = document.createElement('div');
        modal.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0,0,0,0.8);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          backdrop-filter: blur(5px);
        `;
        
        modal.innerHTML = `
          <div style="background: linear-gradient(145deg, rgba(255,255,255,0.25) 0%, rgba(255,255,255,0.05) 100%); padding: 30px; border-radius: 20px; backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.3); box-shadow: 0 20px 40px rgba(0,0,0,0.3); max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto; position: relative;">
            <button onclick="this.closest('div').parentElement.remove()" style="position: absolute; top: 15px; right: 15px; background: rgba(255,255,255,0.2); border: none; border-radius: 50%; width: 30px; height: 30px; cursor: pointer; color: white; font-size: 16px; display: flex; align-items: center; justify-content: center;">√ó</button>
            
            <h2 style="color: white; margin: 0 0 20px 0; text-align: center; font-size: 28px; font-weight: 700;">üèÜ ${getAuthTranslation('leaderboard_button')}</h2>
            
            <div style="margin-bottom: 20px;">
              <select id="gameFilter" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); border-radius: 8px; color: white; font-size: 14px;">
                <option value="all">All Games</option>
                <option value="elementist">Elementist</option>
                <option value="2048">2048</option>
                <option value="wordlist">Wordlist</option>
                <option value="bilardist">Bilardist</option>
              </select>
            </div>
            
            <div id="leaderboardContent" style="color: white;">
              <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.6);">
                Loading leaderboard...
              </div>
            </div>
          </div>
        `;
        
        document.body.appendChild(modal);
        
        // Load leaderboard data
        const gameFilter = modal.querySelector('#gameFilter');
        gameFilter.addEventListener('change', () => loadLeaderboard(gameFilter.value));
        loadLeaderboard('all');
      }

      // Load user statistics
      async function loadUserStats(userId) {
        console.log('üìä Loading user stats for:', userId);
        
        try {
          const database = window.gameistDB || db;
          if (!database) {
            console.error('‚ùå Database not available');
            return;
          }
          
          console.log('üîç Querying leaderboard for user:', userId);
          const snapshot = await database.collection('leaderboard')
            .where('userId', '==', userId)
            .orderBy('timestamp', 'desc')
            .get();
          
          const scores = snapshot.docs.map(doc => doc.data());
          console.log('üìà Found scores from Firestore:', scores.length);
          
          // Also check localStorage for fallback scores
          const localScores = JSON.parse(localStorage.getItem('gameist_local_scores') || '[]');
          const userLocalScores = localScores.filter(score => score.userId === userId);
          console.log('üìà Found scores from localStorage:', userLocalScores.length);
          
          // Check cloud storage fallback for cross-device sync
          const cloudKey = `gameist_scores_${userId}`;
          const cloudScores = JSON.parse(localStorage.getItem(cloudKey) || '[]');
          console.log('üìà Found scores from cloud storage fallback:', cloudScores.length);
          
          // Check Firebase Realtime Database for cross-device sync
          let realtimeScores = [];
          try {
            console.log('üîç Checking Realtime Database for cross-device sync...');
            const database = firebase.database();
            const userScoresRef = database.ref(`userScores/${userId}`);
            
            const snapshot = await userScoresRef.once('value');
            const data = snapshot.val();
            
            if (data) {
              realtimeScores = Object.values(data).map(score => ({
                ...score,
                userId: userId,
                timestamp: score.timestamp || Date.now()
              }));
              console.log('üìà Found scores from Realtime Database:', realtimeScores.length);
              realtimeScores.forEach(score => {
                console.log(`üìÑ Realtime score: ${score.game} - ${score.score} pts`);
              });
            } else {
              console.log('üì≠ No scores found in Realtime Database');
            }
          } catch (error) {
            console.log('‚ÑπÔ∏è Realtime Database not available:', error.message);
          }
          
          // Combine all scores and sort by timestamp (newest first)
          const allScores = [...scores, ...userLocalScores, ...cloudScores, ...realtimeScores];
          
          // Sort by timestamp to get LATEST scores first
          allScores.sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));
          
          console.log('üìà Total combined scores:', allScores.length);
          console.log('üïê Latest scores first:', allScores.slice(0, 3).map(s => `${s.game}: ${s.score} (${new Date(s.timestamp).toLocaleTimeString()})`));
          
          // Calculate HIGHEST score per game (using LATEST scores)
          const gameHighScores = {};
          allScores.forEach(score => {
            if (!gameHighScores[score.game] || gameHighScores[score.game].score < score.score) {
              gameHighScores[score.game] = {
                score: score.score,
                timestamp: score.timestamp,
                game: score.game
              };
            }
          });
          
          const highestScore = Object.values(gameHighScores).reduce((sum, game) => sum + game.score, 0);
          const gamesPlayed = new Set(allScores.map(s => s.game)).size;
          
          console.log('üìä Calculated stats:', { highestScore, gamesPlayed, gameHighScores: Object.values(gameHighScores) });
          
          // Update modal stats
          const modalTotalScore = document.getElementById('modalTotalScore');
          const modalGamesPlayed = document.getElementById('modalGamesPlayed');
          const gameStats = document.getElementById('gameStats');
          
          if (modalTotalScore) modalTotalScore.textContent = highestScore.toLocaleString();
          if (modalGamesPlayed) modalGamesPlayed.textContent = gamesPlayed;
          
          // Update main UI stats
          const userTotalScoreEl = document.getElementById('userTotalScore');
          const userGamesPlayedEl = document.getElementById('userGamesPlayed');
          
          if (userTotalScoreEl) {
            userTotalScoreEl.textContent = highestScore.toLocaleString();
            console.log('‚úÖ Updated main UI highest score:', highestScore);
          } else {
            console.error('‚ùå userTotalScore element not found');
          }
          
          if (userGamesPlayedEl) {
            userGamesPlayedEl.textContent = gamesPlayed;
            console.log('‚úÖ Updated main UI games played:', gamesPlayed);
          } else {
            console.error('‚ùå userGamesPlayed element not found');
          }
          
          // Game-specific stats
          const gameStatsMap = {};
          allScores.forEach(score => {
            if (!gameStatsMap[score.game]) {
              gameStatsMap[score.game] = { count: 0, highScore: 0 };
            }
            gameStatsMap[score.game].count++;
            gameStatsMap[score.game].highScore = Math.max(gameStatsMap[score.game].highScore, score.score);
          });
          
          console.log('üéÆ Game stats map:', gameStatsMap);
          
          if (gameStats) {
            let statsHTML = '';
            for (const [game, stats] of Object.entries(gameStatsMap)) {
              statsHTML += `
                <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                  <span>${game.charAt(0).toUpperCase() + game.slice(1)}</span>
                  <span>${stats.highScore} (${stats.count} games)</span>
                </div>
              `;
            }
            gameStats.innerHTML = statsHTML || '<div>No games played yet</div>';
            console.log('‚úÖ Updated game stats HTML');
          }
          
          console.log('‚úÖ User stats loaded successfully');
          
        } catch (error) {
          console.error('Error loading user stats:', error);
        }
      }

      // Load leaderboard
      async function loadLeaderboard(gameFilter = 'all') {
        try {
          let query = db.collection('leaderboard');
          
          if (gameFilter !== 'all') {
            query = query.where('game', '==', gameFilter);
          }
          
          const snapshot = await query
            .orderBy('score', 'desc')
            .limit(50)
            .get();
          
          const scores = snapshot.docs.map(doc => ({
            id: doc.id,
            ...doc.data()
          }));
          
          // Group by user and get highest score
          const userHighScores = {};
          scores.forEach(score => {
            const key = score.userId;
            if (!userHighScores[key] || userHighScores[key].score < score.score) {
              userHighScores[key] = score;
            }
          });
          
          // Sort by score
          const leaderboard = Object.values(userHighScores)
            .sort((a, b) => b.score - a.score)
            .slice(0, 20);
          
          const leaderboardContent = document.getElementById('leaderboardContent');
          if (leaderboardContent) {
            leaderboardContent.innerHTML = `
              <div style="background: rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden;">
                ${leaderboard.map((entry, index) => `
                  <div style="display: flex; align-items: center; padding: 12px; border-bottom: 1px solid rgba(255,255,255,0.1); ${index < 3 ? 'background: linear-gradient(90deg, rgba(255,215,0,0.1) 0%, transparent 100%);' : ''}">
                    <div style="width: 30px; text-align: center; font-weight: 700; color: ${index < 3 ? '#fbbf24' : 'rgba(255,255,255,0.8)'};">
                      ${index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : index + 1}
                    </div>
                    <img src="${entry.photoURL || 'https://via.placeholder.com/40'}" style="width: 40px; height: 40px; border-radius: 50%; margin: 0 12px; border: 2px solid rgba(255,255,255,0.3);">
                    <div style="flex: 1;">
                      <div style="color: white; font-weight: 600; font-size: 14px;">${entry.displayName}</div>
                      <div style="color: rgba(255,255,255,0.6); font-size: 12px;">${entry.game}</div>
                    </div>
                    <div style="text-align: right;">
                      <div style="color: #fbbf24; font-weight: 700; font-size: 16px;">${entry.score.toLocaleString()}</div>
                      <div style="color: rgba(255,255,255,0.6); font-size: 11px;">points</div>
                    </div>
                  </div>
                `).join('')}
              </div>
            `;
          }
          
        } catch (error) {
          console.error('Error loading leaderboard:', error);
          const leaderboardContent = document.getElementById('leaderboardContent');
          if (leaderboardContent) {
            leaderboardContent.innerHTML = '<div style="text-align: center; color: rgba(255,255,255,0.6);">Error loading leaderboard</div>';
          }
        }
      }

      // Initialize session check
      checkSavedSession();
      
      // Create BroadcastChannel for cross-page communication
      const gameistChannel = new BroadcastChannel('gameist_stats');
      
      // Listen for stats updates from other pages using BroadcastChannel
      function listenForStatsUpdates() {
        try {
          const gameistChannel = new BroadcastChannel('gameist_stats');
          
          gameistChannel.onmessage = (event) => {
            console.log('üì° Received BroadcastChannel message:', event.data);
            
            if (event.data && event.data.type === 'statsUpdate') {
              console.log('üìä Processing stats update from game:', event.data.game);
              console.log('üë§ User ID:', event.data.userId);
              console.log('üìà Score:', event.data.score);
              
              // Check if this is for the current user
              const currentUser = firebase.auth().currentUser;
              if (currentUser && currentUser.uid === event.data.userId) {
                console.log('‚úÖ Stats update matches current user, reloading stats...');
                loadUserStats(currentUser.uid);
                
                // If Firestore failed, sync to localStorage for cross-device sync
                if (!event.data.firestoreSuccess) {
                  syncToCloudStorage(event.data);
                }
              } else {
                console.log('‚ÑπÔ∏è Stats update for different user, ignoring');
              }
            }
          };
          
          gameistChannel.addEventListener('error', (error) => {
            console.error('‚ùå BroadcastChannel error:', error);
          });
          
          console.log('üì° BroadcastChannel stats listener initialized');
        } catch (error) {
          console.error('‚ùå Failed to initialize BroadcastChannel listener:', error);
          // Fallback to localStorage polling
          console.log('üîÑ Falling back to localStorage polling...');
          
          setInterval(() => {
            const updateNeeded = localStorage.getItem('gameist_stats_update_needed');
            if (updateNeeded) {
              try {
                const data = JSON.parse(updateNeeded);
                console.log('üìä Processing stats update from localStorage:', data);
                
                const currentUser = firebase.auth().currentUser;
                if (currentUser && currentUser.uid === data.userId) {
                  console.log('‚úÖ Processing localStorage stats update...');
                  loadUserStats(currentUser.uid);
                  localStorage.removeItem('gameist_stats_update_needed');
                  
                  // If Firestore failed, sync to cloud storage
                  if (!data.firestoreSuccess) {
                    syncToCloudStorage(data);
                  }
                }
              } catch (error) {
                console.error('‚ùå Error processing localStorage update:', error);
                localStorage.removeItem('gameist_stats_update_needed');
              }
            }
          }, 1000);
        }
      }
      
      // Sync scores to cloud storage for cross-device sync when Firestore is down
      function syncToCloudStorage(scoreData) {
        try {
          console.log('‚òÅÔ∏è Syncing to Firebase Realtime Database fallback...');
          
          // Use Firebase Realtime Database as fallback for cross-device sync
          const database = firebase.database();
          const userScoresRef = database.ref(`userScores/${scoreData.userId}`);
          
          // Push the score to Realtime Database
          const newScoreRef = userScoresRef.push();
          newScoreRef.set({
            score: scoreData.score,
            game: scoreData.game,
            timestamp: scoreData.timestamp,
            displayName: scoreData.displayName || 'Unknown',
            firestoreFailed: true
          }).then(() => {
            console.log('‚úÖ Score synced to Firebase Realtime Database fallback');
          }).catch(error => {
            console.error('‚ùå Error syncing to Realtime Database:', error);
            
            // Final fallback: localStorage (device only)
            const cloudKey = `gameist_scores_${scoreData.userId}`;
            const existingData = JSON.parse(localStorage.getItem(cloudKey) || '[]');
            
            const exists = existingData.some(score => 
              score.score === scoreData.score && 
              score.game === scoreData.game && 
              Math.abs(score.timestamp - scoreData.timestamp) < 5000
            );
            
            if (!exists) {
              existingData.push(scoreData);
              localStorage.setItem(cloudKey, JSON.stringify(existingData));
              console.log('‚ö†Ô∏è Score saved to localStorage only (device sync)');
            }
          });
          
        } catch (error) {
          console.error('‚ùå Error in cloud storage sync:', error);
        }
      }
      
      // Start listening for stats updates
      listenForStatsUpdates();
      
      // Guaranteed auto-sync every 5 seconds - SIMPLE AND RELIABLE
      setInterval(() => {
        const savedUser = localStorage.getItem('gameist_user');
        if (savedUser) {
          const user = JSON.parse(savedUser);
          console.log('üîÑ Auto-sync every 5 seconds for:', user.displayName);
          loadUserStats(user.uid);
        }
      }, 5000);

      // Auto-refresh stats every 30 seconds for cross-device sync
      setInterval(() => {
        const user = firebase.auth().currentUser;
        if (user) {
          console.log('üîÑ Auto-refreshing user stats for cross-device sync...');
          loadUserStats(user.uid);
        }
      }, 30000);

      // Realtime Database auto-sync listener for instant cross-device updates
      function setupRealtimeListener() {
        const savedUser = localStorage.getItem('gameist_user');
        if (savedUser) {
          try {
            const user = JSON.parse(savedUser);
            console.log('üî• Setting up Realtime Database listener for user:', user.displayName);
            
            const database = firebase.database();
            const userScoresRef = database.ref(`userScores/${user.uid}`);
            
            // Listen for real-time updates
            userScoresRef.on('value', (snapshot) => {
              console.log('üì° Realtime Database update detected!');
              const data = snapshot.val();
              
              if (data) {
                const scores = Object.values(data);
                console.log('üìä Realtime scores updated:', scores.length);
                
                // Reload stats immediately
                loadUserStats(user.uid);
              }
            });
            
            console.log('‚úÖ Realtime Database listener active');
          } catch (error) {
            console.error('‚ùå Error setting up Realtime listener:', error);
          }
        }
      }

      // Setup listener when user is available
      firebase.auth().onAuthStateChanged((user) => {
        if (user) {
          setupRealtimeListener();
        }
      });

      // Manual Realtime Database sync button
      function addManualSyncButton() {
        const userInfo = document.getElementById('userInfo');
        if (userInfo && !document.getElementById('manualSyncBtn')) {
          const syncBtn = document.createElement('button');
          syncBtn.id = 'manualSyncBtn';
          syncBtn.innerHTML = 'üîÑ Sync Now';
          syncBtn.style.cssText = `
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
          `;
          
          syncBtn.addEventListener('click', async () => {
            const savedUser = localStorage.getItem('gameist_user');
            if (savedUser) {
              const user = JSON.parse(savedUser);
              console.log('üîÑ Manual Realtime Database sync triggered for:', user.displayName);
              
              // Force reload from Realtime Database
              try {
                const database = firebase.database();
                const userScoresRef = database.ref(`userScores/${user.uid}`);
                
                const snapshot = await userScoresRef.once('value');
                const data = snapshot.val();
                
                if (data) {
                  const scores = Object.values(data);
                  console.log('üìä Manual sync found scores:', scores.length);
                  scores.forEach(score => {
                    console.log(`üìÑ ${score.game}: ${score.score} pts`);
                  });
                }
                
                // Reload user stats
                loadUserStats(user.uid);
                
                syncBtn.innerHTML = '‚úÖ Synced!';
                setTimeout(() => {
                  syncBtn.innerHTML = 'üîÑ Sync Now';
                }, 2000);
                
              } catch (error) {
                console.error('‚ùå Manual sync error:', error);
                syncBtn.innerHTML = '‚ùå Error';
                setTimeout(() => {
                  syncBtn.innerHTML = 'üîÑ Sync Now';
                }, 2000);
              }
            }
          });
          
          userInfo.appendChild(syncBtn);
          console.log('‚úÖ Manual sync button added');
        }
      }

      // Add manual sync button when user is logged in
      firebase.auth().onAuthStateChanged((user) => {
        if (user) {
          setTimeout(addManualSyncButton, 1000);
        }
      });

      // Also add on page load if user is already logged in
      setTimeout(addManualSyncButton, 2000);

      // Immediate call to check saved session and load stats
      checkSavedSession();

      // Check for redirect result (when using signInWithRedirect) - Enhanced
      firebase.auth().getRedirectResult()
        .then((result) => {
          if (result.user) {
            console.log("üîÑ Redirect result received:", result.user.displayName);
            handleAuthSuccess(result);
          } else {
            console.log("‚ÑπÔ∏è No redirect result - normal flow");
          }
        })
        .catch((error) => {
          console.error("‚ùå Redirect result error:", error);
          if (error.code !== 'auth/no-current-user') {
            handleAuthError(error);
          }
        });

      // Enhanced popup blocker detection
      document.getElementById('googleLogin').addEventListener('click', function(e) {
        e.preventDefault();
        
        const authStatus = document.getElementById('authStatus');
        authStatus.style.display = 'block';
        authStatus.innerHTML = 'üîÑ Google giri≈ü ba≈ülatƒ±lƒ±yor...';
        
        // Force user gesture for popup
        const userGesture = new Promise((resolve) => {
          setTimeout(resolve, 100);
        });
        
        userGesture.then(() => {
          // Try popup with explicit user gesture
          firebase.auth().signInWithPopup(provider)
            .then((result) => {
              console.log("‚úÖ Popup successful");
              handleAuthSuccess(result);
            })
            .catch((error) => {
              console.error("‚ùå Popup failed:", error);
              
              // Immediate redirect fallback
              if (error.code === 'auth/popup-closed-by-user' || 
                  error.code === 'auth/popup-blocked' ||
                  error.code === 'auth/cancelled-popup-request') {
                
                console.log("üîÑ Trying redirect method...");
                authStatus.innerHTML = 'üîÑ Popup engellendi, y√∂nlendiriliyor...';
                
                // Use redirect as fallback
                firebase.auth().signInWithRedirect(provider)
                  .then(() => {
                    console.log("‚úÖ Redirect initiated");
                    authStatus.innerHTML = 'üîÑ Y√∂nlendirme ba≈ülatƒ±ldƒ±...';
                  })
                  .catch((redirectError) => {
                    console.error("‚ùå Redirect failed:", redirectError);
                    handleAuthError(redirectError);
                  });
              } else {
                handleAuthError(error);
              }
            });
        });
      });

      // Leaderboard helper functions (ready for implementation)
      function saveUserScore(userId, displayName, score) {
        if (!db) {
          console.error("‚ùå Firestore not initialized");
          return;
        }
        
        return db.collection('leaderboard').add({
          userId: userId,
          displayName: displayName,
          score: score,
          timestamp: firebase.firestore.FieldValue.serverTimestamp(),
          game: 'elementist' // or other game name
        });
      }

      function getTopScores(game = 'elementist', limit = 10) {
        if (!db) {
          console.error("‚ùå Firestore not initialized");
          return Promise.resolve([]);
        }
        
        return db.collection('leaderboard')
          .where('game', '==', game)
          .orderBy('score', 'desc')
          .limit(limit)
          .get();
      }

      console.log("üî• Firebase Authentication initialized successfully");
    </script>
    <script src="https://pl28580836.effectivegatecpm.com/02/74/05/0274056288dd0d4327742db82768e3ed.js"></script>
  </body>
</html>
